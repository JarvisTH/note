# 智能指针

C++里面的四个智能指针: auto_ptr, unique_ptr,shared_ptr, weak_ptr 其中后三个是C++11支持，并且第一个已经被C++11弃用。

**智能指针主要用于管理在堆上分配的内存，它将普通的指针封装为一个栈对象。**当栈对象的生存周期结束后，会在析构函数中释放掉申请的内存，从而防止内存泄漏。C++ 11中最常用的智能指针类型为**shared_ptr**,它采用**引用计数的方法**，记录当前内存资源被多少个智能指针引用。该引用计数的内存在堆上分配。只有引用计数为0时，智能指针才会自动释放引用的内存资源。**对shared_ptr进行初始化时不能将一个普通指针直接赋值给智能指针**，因为一个是指针，一个是类。可以通过make_shared函数或者通过构造函数传入普通指针。并可以通过get函数获得普通指针。



## 一、为什么使用智能指针

智能指针的作用是管理一个指针，因为存在以下这种情况：申请的空间在函数结束时忘记释放，造成内存泄漏。使用智能指针可以很大程度上的避免这个问题，因为智能指针是一个类，当超出了类的实例对象的作用域时，会自动调用对象的析构函数，析构函数会自动释放资源。所以智能指针的作用原理就是在函数结束时自动释放内存空间，不需要手动释放内存空间。



## 二、auto_ptr



