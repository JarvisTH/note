## 1.[[命令的 =~ 操作符判断字符串的包含关系

[[ 命令的 =～ 操作符来判断某个字符串是否包含特定模式。使用 =~ 操作符时，其右边的字符串被认为是一个扩展正则表达式。

扩展之后跟左边字符串进行比较，看左边字符串是否**包含**指定模式，也就是判断右边的模式是否为左边字符串的子字符串。在所给的扩展正则表达式中，用引号括起来的部分会被当成字符串，不再被当成正则表达式。如果 =~ 操作符右边的字符串都用引号括起来，那么表示匹配这个字符串自身的内容，不再解析成正则表达式。**[]** 内部两端要有空格。

**test 命令**用于检查某个条件是否成立，它可以进行数值、字符和文件三个方面的测试。码中的 **[]** 执行基本的算数运。

## 数值测试

| 参数 | 说明           |
| :--- | :------------- |
| -eq  | 等于则为真     |
| -ne  | 不等于则为真   |
| -gt  | 大于则为真     |
| -ge  | 大于等于则为真 |
| -lt  | 小于则为真     |
| -le  | 小于等于则为真 |

## 字符串测试

| 参数      | 说明                     |
| :-------- | :----------------------- |
| =         | 等于则为真               |
| !=        | 不相等则为真             |
| -z 字符串 | 字符串的长度为零则为真   |
| -n 字符串 | 字符串的长度不为零则为真 |

## 文件测试

| 参数      | 说明                                 |
| :-------- | :----------------------------------- |
| -e 文件名 | 如果文件存在则为真                   |
| -r 文件名 | 如果文件存在且可读则为真             |
| -w 文件名 | 如果文件存在且可写则为真             |
| -x 文件名 | 如果文件存在且可执行则为真           |
| -s 文件名 | 如果文件存在且至少有一个字符则为真   |
| -d 文件名 | 如果文件存在且为目录则为真           |
| -f 文件名 | 如果文件存在且为普通文件则为真       |
| -c 文件名 | 如果文件存在且为字符型特殊文件则为真 |
| -b 文件名 | 如果文件存在且为块特殊文件则为真     |



## 2.${}、##和%%使用

file=/dir1/dir2/dir3/my.file.txt

可以用${ }分别替换得到不同的值：

**${file#*/}**：删掉第一个 / 及其左边的字符串：dir1/dir2/dir3/my.file.txt

**${file##*/}**：删掉最后一个 /  及其左边的字符串：my.file.txt

${file#*.}：删掉第一个 .  及其左边的字符串：file.txt

**${file##*.}**：删掉最后一个 .  及其左边的字符串：txt

${file%/*}：删掉最后一个  /  及其右边的字符串：/dir1/dir2/dir3

**${file%%/*}**：删掉第一个 /  及其右边的字符串：(空值)

**${file%.*}**：删掉最后一个  .  及其右边的字符串：/dir1/dir2/dir3/my.file

${file%%.*}：删掉第一个  .  及其右边的字符串：/dir1/dir2/dir3/my

【记忆的方法为】：

\# 是 去掉左边（键盘上#在 $ 的左边）

%是去掉右边（键盘上% 在$ 的右边）

单一符号是最小匹配；两个符号是最大匹配

${file:0:5}：提取最左边的 5 个字节：/dir1

${file:5:5}：提取第 5 个字节右边的连续5个字节：/dir2

也可以对变量值里的字符串作替换：

${file/dir/path}：将第一个dir 替换为path：/path1/dir2/dir3/my.file.txt

${file//dir/path}：将全部dir 替换为 path：/path1/path2/path3/my.file.txt