参考：*   [Linux中的网络管理——网络配置及命令](https://blog.csdn.net/qq_15096707/article/details/78420069#%E7%9B%AE%E5%BD%95)

网络配置：
- ifconfig命令
- 网络配置文件：
..网卡信息文件
..主机名文件
..DNS配置文件
- VMware中的网络参数配置
..桥接模式下配置静态ip
- 网络命令：
..网络环境操作
..网络测速命令

##一、网络配置
- 图形界面配置IP地址
- ifconfig命令临时配置IP地址,临时配置IP地址，重启网络服务或者计算机后失效。
- setup工具永久配置IP地址（Red Hat系统）
- 修改网络配置文件

##二、ifconfig命令
**ifconfig命令可以查看与配置网络状态。**
```
ens33: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.13.129  netmask 255.255.255.0  broadcast 192.168.13.255
        inet6 fe80::20c:29ff:fedd:3891  prefixlen 64  scopeid 0x20<link>
        ether 00:0c:29:dd:38:91  txqueuelen 1000  (Ethernet)
        RX packets 22319  bytes 19225181 (18.3 MiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 9394  bytes 972357 (949.5 KiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen 128  scopeid 0x10<host>
        loop  txqueuelen 1000  (Local Loopback)
        RX packets 424  bytes 23260 (22.7 KiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 424  bytes 23260 (22.7 KiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

```
lo：表示本地回环网卡信息。

使用ifconfig命令还可以临时设置某一网卡的IP地址和子网掩码。
```
ifconfig ens33 192.168.0.200 netmask 255.255.255.0
```

##三、网络配置文件
1.网卡信息文件
查看第一张网卡的网卡信息：
```
cat /etc/sysconfig/network-scripts/ifcfg-ens33

TYPE="Ethernet"
PROXY_METHOD="none"
BROWSER_ONLY="no"
BOOTPROTO="dhcp"
DEFROUTE="yes"
IPV4_FAILURE_FATAL="no"
IPV6INIT="yes"
IPV6_AUTOCONF="yes"
IPV6_DEFROUTE="yes"
IPV6_FAILURE_FATAL="no"
IPV6_ADDR_GEN_MODE="stable-privacy"
NAME="ens33"
UUID="59be5af3-2a0b-42dc-aa00-eba7f7e7f200"
DEVICE="ens33"
ONBOOT="no"
```
![参数说明](https://upload-images.jianshu.io/upload_images/9449419-3838c6aa889525cb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
> 自动获取IP的条件是：必须在局域网内存在DHCP服务器。
> 相同UUID网络配置的计算机会导致互相不能上网。

2.主机名文件


3.DNS配置文件
查看DNS配置文件：
```
[root@centos-7-jarvis sysconfig]# cat /etc/resolv.conf
; generated by /usr/sbin/dhclient-script
search localdomain
nameserver 192.168.13.2
```
最重要的是nameserver这一项，设置的是域名服务器的地址，多个域名服务器，则在后续添加空格继续补充域名服务器的地址，或者另起一行做类似的nameserver配置。

##四、VMware中的linux网络参数配置
- 配置Linux ip地址
- CentOS 6以上系统修改网络配置以启动网卡，将/etc/sysconfig/network-scripts/ifcfg-ens33的ONBOOT选项值修改为yes,重启网络服务service network restart。
- 对于网络配置文件中UUID出现相同的情况，需要修改UUID的值，修改方式如下：
```
#删除MAC地址
vi /etc/sysconfig/network-scripts/ifcfg-ens33

#删除网卡和MAC地址绑定文件
rm -rf /etc/udev/rules.d/70-persistent-net.rules

#重启系统
reboot
```
- 设置VMWare虚拟机的网络连接方式，选择桥接模式（可不勾选“复制物理网络连接状态”这一选项）。
*桥接模式*，允许虚拟机访问外网，同时可以与局域网内的其他计算机进行通讯（包括本机）；
*NAT模式*，允许虚拟机访问外网，能与本机进行数据通讯，且能访问局域网内其他主机，但局域网内的其他主机不能访问该虚拟机；Host Only模式，默认情况下只能同本机进行通讯；
- 修改桥接的网卡，在“虚拟网络编辑器”窗口中选择VMnet0，修改桥接模式下桥接的网卡，这里选择可以上网的网卡。

**VMware桥接模式下配置静态IP**
修改网卡配置文件，如下：
```
DEVICE=eth0
HWADDR=00:0C:29:FC:8D:E6
TYPE=Ethernet
#UUID=343b502d-2249-4e33-9187-9abc285b9292
UUID=31b6504c-7ddd-4b74-a51e-46cd34ed182d
ONBOOT=yes
NM_CONTROLLED=yes

#BOOTPROTO=dhcp
BOOTPROTO=static
IPADDR=11.10.1.192
NETMASK=255.255.255.0
GATEWAY=10.8.8.1
DNS1=114.114.114.114
DNS2=8.8.8.8
IPV6INIT=no
USERCTL=no
```
重启网卡：
```
service network restart
```

##五、Linux网络命令
1.网络操作环境
- ifconfig:查看网络状态（能查看IP地址和子网掩码，但是不能查看网关和DNS地址），还可以临时设置某一网卡的IP地址和子网掩码。
- ifdown 网卡设备名：禁用该网卡设备.
- ifup 网卡设备名：启用该网卡设备。
- 查询网络状态,netstat 选项，可以用于查看当前计算机开放的端口。
```
-t：列出TCP协议端口
-u：列出UPD协议端口
-n：不使用域名和服务名，而使用IP地址和端口号
-l：仅列出在监听状态网络服务
-a：列出所有的网络连接
-r：列出路由列表，功能和route命令一只
常用组合：-tuln、-an、-rn
查看某一状态下的网络连接情况，如：netstat -an | grep ESTABLISHED
查看某一网络状态下的行数（查看有多少台计算机连接到当前服务器），如：netstat -an | grep ESTABLISHED | wc -l
netstat -rn 和 route -n 命令功能一样，结果一致。通过这样的命令查看当前计算机的网关地址。
```
- route命令:
route -n：查看路由列表（可以看到当前计算机的网关）。
　　route add default gw 192.168.1.1：临时设定网关。
　　route del default gw 192.168.1.1：删除设定的网关。
- 域名解析命令:nslookup [主机名或IP]：进行域名或IP地址的解析。
```
nslookup
> server
# 查看本机DNS服务器
> exit
# 退出
```
CentOS 6.x后nslookup已不存在，需要进行安装。在不想安装nslookup的情况下，又想查看本机配置的DNS服务器地址，可以使用cat /etc/resolv.conf命令。

2.网络测速命令
- ping [选项] ip或域名：探测指定IP或域名的网络状况。
> 选项：
-c 次数：指定ping发送包的次数
- telnet [域名或IP] [端口]：远程管理与端口探测命令。（telnet的远程连接是**极不安全**的，它是明文传递数据，并未将数据加密。所以我们并不建议使用telnet命令进行远程管理，但是我们可以通过该命令**探测某个计算机中是否开放了某一端口**。如：telnet 192.168.0.1 80)。
- traceroute [选项] IP或域名：路由跟踪，查看访问某一IP或域名时经过的路由（路由路径）。
>选项：
-n 使用IP而不使用域名显示
- wget 下载地址：下载命令。
- tcpdump命令：用于监听某一网卡下某一服务的数据包接收情况（截获数据包-抓包）。如：tcpdump -i eth0 -nnX port 21。
>选项：
-i 指定监听的网卡
-nn 将数据包中的域名与服务转为IP和端口显示
-X 以十六进制和ASCII码显示数据包内容
port 指定监听的端口


