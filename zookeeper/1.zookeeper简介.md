# 一.zookeeper简介

zookeeper主要可以实现主节点选举、崩溃检测、元数据存储、故障恢复、服务发现等功能，保障强一致性、有序性、持久性，提供了一种简单的分布式并发处理机制。

## 1.1 zookeeper不适用场景

- 不适合用作海量数据存储

## 1.2 使用zookeeper构建分布式系统

使⽤⼀个独⽴的协调组件有⼏个重要的好处：⾸先，我们可以独⽴地设计和实现该组件，这样独⽴的组件可以跨多个应⽤共享。其次，系统架 构师可以简化协作⽅⾯的⼯作。最后，系统可以独⽴地运⾏和协作这些组件，独⽴这样的组件，也简化了⽣产环境中解决实际问题的任务。

分布式系统中的进程通信有两种选择：直接通过⽹络进⾏信息交换，或读写某些共享存储。ZooKeeper使⽤共享存储模型来实现应⽤间的协作和 同步原语。对于共享存储本⾝，又需要在进程和存储间进⾏⽹络通信。

特别注意以下问题：

- 消息延迟
- 处理器性能
- 时钟偏移

## 1.3 分布式协助难点

在独⽴主机上运⾏的应⽤与分布式应⽤发⽣的故障存在显著的区别： 

在分布式应⽤中，可能会发⽣局部故障，当独⽴主机崩溃，这个主机上运 ⾏的所有进程都会失败，如果是独⽴主机上运⾏多个进程，⼀个进程执⾏ 的失败，其他进程可以通过操作系统获得这个故障，操作系统提供了健壮 的多进程消息通信的保障。

在分布式环境中，如果⼀个 主机或进程发⽣故障，其他主机继续运⾏，并会接管发⽣故障的进程，为了能够处理故障进程，这些仍在运⾏的进程必须能够检测到这个故障，⽆论是消息丢失或发⽣了时间偏移。

CAP，表⽰⼀致性（Consistency）、可⽤性（Availability）和分区容错性（Partition-tolerance），该定律指出，当设计⼀个分布式系统时，我们希望这三种属性全部满⾜，但没有系统可以 同时满⾜这三种属性。

ZooKeeper的设计尽可能满⾜⼀致性和可⽤性。