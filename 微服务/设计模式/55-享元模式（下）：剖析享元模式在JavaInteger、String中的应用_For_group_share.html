<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>55-äº«å…ƒæ¨¡å¼ï¼ˆä¸‹ï¼‰ï¼šå‰–æäº«å…ƒæ¨¡å¼åœ¨JavaIntegerã€Stringä¸­çš„åº”ç”¨</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <style>
        html {
            color: #333;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
            text-rendering: optimizelegibility;
            font-family: Helvetica Neue, PingFang SC, Verdana, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif
        }

        html.borderbox *,
        html.borderbox :after,
        html.borderbox :before {
            box-sizing: border-box
        }

        article,
        aside,
        blockquote,
        body,
        button,
        code,
        dd,
        details,
        dl,
        dt,
        fieldset,
        figcaption,
        figure,
        footer,
        form,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        header,
        hr,
        input,
        legend,
        li,
        menu,
        nav,
        ol,
        p,
        pre,
        section,
        td,
        textarea,
        th,
        ul {
            margin: 0;
            padding: 0
        }

        article,
        aside,
        details,
        figcaption,
        figure,
        footer,
        header,
        menu,
        nav,
        section {
            display: block
        }

        audio,
        canvas,
        video {
            display: inline-block
        }

        body,
        button,
        input,
        select,
        textarea {
            font: 300 1em/1.8 PingFang SC, Lantinghei SC, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, Helvetica, sans-serif
        }

        button::-moz-focus-inner,
        input::-moz-focus-inner {
            padding: 0;
            border: 0
        }

        table {
            border-collapse: collapse;
            border-spacing: 0
        }

        fieldset,
        img {
            border: 0
        }

        blockquote {
            position: relative;
            color: #999;
            font-weight: 400;
            border-left: 1px solid #1abc9c;
            padding-left: 1em;
            margin: 1em 3em 1em 2em
        }

        @media only screen and (max-width: 640px) {
            blockquote {
                margin: 1em 0
            }
        }

        abbr,
        acronym {
            border-bottom: 1px dotted;
            font-variant: normal
        }

        abbr {
            cursor: help
        }

        del {
            text-decoration: line-through
        }

        address,
        caption,
        cite,
        code,
        dfn,
        em,
        th,
        var {
            font-style: normal;
            font-weight: 400
        }

        ol,
        ul {
            list-style: none
        }

        caption,
        th {
            text-align: left
        }

        q:after,
        q:before {
            content: ""
        }

        sub,
        sup {
            font-size: 75%;
            line-height: 0;
            position: relative
        }

        :root sub,
        :root sup {
            vertical-align: baseline
        }

        sup {
            top: -.5em
        }

        sub {
            bottom: -.25em
        }

        a {
            color: #1abc9c
        }

        a:hover {
            text-decoration: underline
        }

        .typo a {
            border-bottom: 1px solid #1abc9c
        }

        .typo a:hover {
            border-bottom-color: #555;
            color: #555
        }

        .typo a:hover,
        a,
        ins {
            text-decoration: none
        }

        .typo-u,
        u {
            text-decoration: underline
        }

        mark {
            background: #fffdd1;
            border-bottom: 1px solid #ffedce;
            padding: 2px;
            margin: 0 5px
        }

        code,
        pre,
        pre tt {
            font-family: Courier, Courier New, monospace
        }

        pre {
            background: hsla(0, 0%, 97%, .7);
            border: 1px solid #ddd;
            padding: 1em 1.5em;
            display: block;
            -webkit-overflow-scrolling: touch
        }

        hr {
            border: none;
            border-bottom: 1px solid #cfcfcf;
            margin-bottom: .8em;
            height: 10px
        }

        .typo-small,
        figcaption,
        small {
            font-size: .9em;
            color: #888
        }

        b,
        strong {
            font-weight: 700;
            color: #000
        }

        [draggable] {
            cursor: move
        }

        .clearfix:after,
        .clearfix:before {
            content: "";
            display: table
        }

        .clearfix:after {
            clear: both
        }

        .clearfix {
            zoom: 1
        }

        .textwrap,
        .textwrap td,
        .textwrap th {
            word-wrap: break-word;
            word-break: break-all
        }

        .textwrap-table {
            table-layout: fixed
        }

        .serif {
            font-family: Palatino, Optima, Georgia, serif
        }

        .typo-dl,
        .typo-form,
        .typo-hr,
        .typo-ol,
        .typo-p,
        .typo-pre,
        .typo-table,
        .typo-ul,
        .typo dl,
        .typo form,
        .typo hr,
        .typo ol,
        .typo p,
        .typo pre,
        .typo table,
        .typo ul,
        blockquote {
            margin-bottom: 1rem
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: PingFang SC, Helvetica Neue, Verdana, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif;
            color: #000;
            line-height: 1.35
        }

        .typo-h1,
        .typo-h2,
        .typo-h3,
        .typo-h4,
        .typo-h5,
        .typo-h6,
        .typo h1,
        .typo h2,
        .typo h3,
        .typo h4,
        .typo h5,
        .typo h6 {
            margin-top: 1.2em;
            margin-bottom: .6em;
            line-height: 1.35
        }

        .typo-h1,
        .typo h1 {
            font-size: 2em
        }

        .typo-h2,
        .typo h2 {
            font-size: 1.8em
        }

        .typo-h3,
        .typo h3 {
            font-size: 1.6em
        }

        .typo-h4,
        .typo h4 {
            font-size: 1.4em
        }

        .typo-h5,
        .typo-h6,
        .typo h5,
        .typo h6 {
            font-size: 1.2em
        }

        .typo-ul,
        .typo ul {
            margin-left: 1.3em;
            list-style: disc
        }

        .typo-ol,
        .typo ol {
            list-style: decimal;
            margin-left: 1.9em
        }

        .typo-ol ol,
        .typo-ol ul,
        .typo-ul ol,
        .typo-ul ul,
        .typo li ol,
        .typo li ul {
            margin-bottom: .8em;
            margin-left: 2em
        }

        .typo-ol ul,
        .typo-ul ul,
        .typo li ul {
            list-style: circle
        }

        .typo-table td,
        .typo-table th,
        .typo table caption,
        .typo table td,
        .typo table th {
            border: 1px solid #ddd;
            padding: .5em 1em;
            color: #666
        }

        .typo-table th,
        .typo table th {
            background: #fbfbfb
        }

        .typo-table thead th,
        .typo table thead th {
            background: hsla(0, 0%, 95%, .7)
        }

        .typo table caption {
            border-bottom: none
        }

        .typo-input,
        .typo-textarea {
            -webkit-appearance: none;
            border-radius: 0
        }

        .typo-em,
        .typo em,
        caption,
        legend {
            color: #000;
            font-weight: inherit
        }

        .typo-em {
            position: relative
        }

        .typo-em:after {
            position: absolute;
            top: .65em;
            left: 0;
            width: 100%;
            overflow: hidden;
            white-space: nowrap;
            content: "\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB"
        }

        .typo img {
            max-width: 100%
        }

        .common-content {
            font-weight: 400;
            color: #353535;
            line-height: 1.75rem;
            white-space: normal;
            word-break: normal;
            font-size: 1rem
        }

        .common-content img {
            display: block;
            max-width: 100%;
            background-color: #eee
        }

        .common-content audio,
        .common-content video {
            width: 100%;
            background-color: #eee
        }

        .common-content center,
        .common-content font {
            margin-top: 1rem;
            display: inline-block
        }

        .common-content center {
            width: 100%
        }

        .common-content pre {
            margin-top: 1rem;
            padding-left: 0;
            padding-right: 0;
            position: relative;
            overflow: hidden
        }

        .common-content pre code {
            font-size: .8rem;
            font-family: Consolas, Liberation Mono, Menlo, monospace, Courier;
            display: block;
            width: 100%;
            box-sizing: border-box;
            padding-left: 1rem;
            padding-right: 1rem;
            overflow-x: auto
        }

        .common-content hr {
            border: none;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            border-top: 1px solid #f5f5f5;
            height: 1px;
            background: none
        }

        .common-content b,
        .common-content h1,
        .common-content h2,
        .common-content h3,
        .common-content h4,
        .common-content h5,
        .common-content strong {
            font-weight: 700
        }

        .common-content h1,
        .common-content h2 {
            font-size: 1.125rem;
            margin-bottom: .45rem
        }

        .common-content h3,
        .common-content h4,
        .common-content h5 {
            font-size: 1rem;
            margin-bottom: .45rem
        }

        .common-content p {
            font-weight: 400;
            color: #353535;
            margin-top: .15rem
        }

        .common-content .orange {
            color: #ff5a05
        }

        .common-content .reference {
            font-size: 1rem;
            color: #888
        }

        .custom-rich-content h1 {
            margin-top: 0;
            font-weight: 400;
            font-size: 15.25px;
            border-bottom: 1px solid #eee;
            line-height: 2.8
        }

        .custom-rich-content li,
        .custom-rich-content p {
            font-size: 14px;
            color: #888;
            line-height: 1.6
        }

        table.hljs-ln {
            margin-bottom: 0;
            border-spacing: 0;
            border-collapse: collapse
        }

        table.hljs-ln,
        table.hljs-ln tbody,
        table.hljs-ln td,
        table.hljs-ln tr {
            box-sizing: border-box
        }

        table.hljs-ln td {
            padding: 0;
            border: 0
        }

        table.hljs-ln td.hljs-ln-numbers {
            min-width: 15px;
            color: rgba(27, 31, 35, .3);
            text-align: right;
            white-space: nowrap;
            cursor: pointer;
            user-select: none
        }

        table.hljs-ln td.hljs-ln-code,
        table.hljs-ln td.hljs-ln-numbers {
            font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
            font-size: 12px;
            line-height: 20px;
            vertical-align: top
        }

        table.hljs-ln td.hljs-ln-code {
            position: relative;
            padding-right: 10px;
            padding-left: 10px;
            overflow: visible;
            color: #24292e;
            word-wrap: normal;
            white-space: pre
        }

        video::-webkit-media-controls {
            overflow: hidden !important
        }

        video::-webkit-media-controls-enclosure {
            width: calc(100% + 32px);
            margin-left: auto
        }

        ._29HP61GA_0 {
            max-width:800px;
            margin:0 auto;
            margin-bottom: 20px;
            font-weight: 400;
            color: #353535;
            line-height: 1.76;
            white-space: normal;
            word-break: normal;
            font-size: 17px;
            -webkit-transition: background-color .3s ease;
            transition: background-color .3s ease
        }

        ._29HP61GA_0 .MathJax_Display {
            overflow: auto
        }

        ._29HP61GA_0 .poster {
            position: fixed;
            left: -10000px;
            top: -10000px;
            overflow: hidden;
            padding: 1rem;
            background: #ececec
        }

        ._29HP61GA_0 .richcontent-pre-copy {
            font-size: 13px;
            color: #888;
            position: absolute;
            right: 1em;
            top: .5em;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none
        }

        ._29HP61GA_0 .richcontent-pre-copy .iconfont {
            font-size: 12px;
            margin-right: .2em
        }

        ._29HP61GA_0 a {
            color: #fa8919;
            border-bottom: 1px solid #fa8919
        }

        ._29HP61GA_0 img {
            display: block;
            max-width: 100%;
            position: relative;
            left: 50%;
            -webkit-transform: translateX(-50%);
            transform: translateX(-50%);
            background-color: #eee;
            vertical-align: top;
            border-radius: 0
        }

        ._29HP61GA_0 audio,
        ._29HP61GA_0 video {
            width: 100%;
            background-color: #eee
        }

        ._29HP61GA_0 pre {
            margin-top: 16px;
            padding: 34px 0 0;
            margin-bottom: 30px;
            position: relative;
            border-radius: 6px;
            background: rgba(246, 247, 251, .749);
            border: 0
        }

        ._29HP61GA_0 pre code {
            font-size: 12px;
            font-family: Consolas, Liberation Mono, Menlo, monospace, Courier;
            display: block;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
            margin-left: 16px;
            margin-right: 16px;
            overflow-x: scroll
        }

        ._29HP61GA_0 pre code:after {
            content: "";
            height: 30px;
            width: 100%;
            display: block
        }

        ._29HP61GA_0 hr {
            border: none;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            border-top: 1px solid #f5f5f5;
            height: 1px;
            background: none
        }

        ._29HP61GA_0 h1,
        ._29HP61GA_0 h2,
        ._29HP61GA_0 h3,
        ._29HP61GA_0 h4,
        ._29HP61GA_0 h5 {
            margin-bottom: 20px;
            margin-top: 0;
            font-weight: 700
        }

        ._29HP61GA_0 b,
        ._29HP61GA_0 strong {
            font-weight: 700
        }

        ._29HP61GA_0 h1 {
            font-size: 21px
        }

        ._29HP61GA_0 h2 {
            font-size: 20px
        }

        ._29HP61GA_0 h3 {
            font-size: 19px
        }

        ._29HP61GA_0 h4 {
            font-size: 18px
        }

        ._29HP61GA_0 h5 {
            font-size: 17px
        }

        ._29HP61GA_0 center,
        ._29HP61GA_0 p {
            font-weight: 400;
            color: #353535;
            margin-top: 0;
            margin-bottom: 30px;
            word-break: break-word
        }

        ._29HP61GA_0 center {
            text-align: center
        }

        ._29HP61GA_0 blockquote {
            margin-top: 0;
            margin-bottom: 34px;
            border-left: 3px solid #e8e8e8;
            padding-left: 17px;
            color: #353535
        }

        ._29HP61GA_0 blockquote p {
            margin-top: 0;
            margin-bottom: 0
        }

        ._29HP61GA_0 ol,
        ._29HP61GA_0 ul {
            margin-bottom: 30px
        }

        ._29HP61GA_0 ol p,
        ._29HP61GA_0 ul p {
            margin-top: 0;
            margin-bottom: 0
        }

        ._29HP61GA_0 ol {
            list-style: decimal;
            margin-left: 20px
        }

        ._29HP61GA_0 ul li {
            padding-left: 17px;
            position: relative;
            margin-bottom: 10px
        }

        ._29HP61GA_0 ul li:after {
            content: "";
            height: 6px;
            width: 6px;
            border-radius: 50%;
            background: #353535;
            position: absolute;
            top: 10px;
            left: 0
        }

        ._29HP61GA_0 .orange {
            color: #fa8919
        }

        ._29HP61GA_0 .reference {
            color: #888
        }

        ._29HP61GA_0 .m-right {
            text-align: right
        }

        ._29HP61GA_0 .m-center {
            text-align: center;
            display: block
        }

        ._29HP61GA_0 .m-gray {
            color: #888
        }

        ._29HP61GA_0 .m-small {
            font-size: 15px
        }

        ._29HP61GA_0 table.hljs-ln {
            margin-bottom: 0;
            border-spacing: 0;
            border-collapse: collapse
        }

        ._29HP61GA_0 table.hljs-ln,
        ._29HP61GA_0 table.hljs-ln tbody,
        ._29HP61GA_0 table.hljs-ln td,
        ._29HP61GA_0 table.hljs-ln tr {
            -webkit-box-sizing: border-box;
            box-sizing: border-box
        }

        ._29HP61GA_0 table.hljs-ln td {
            padding: 0;
            border: 0
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers {
            min-width: 15px;
            font-size: 12px;
            color: rgba(27, 31, 35, .3);
            text-align: right;
            white-space: nowrap;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-code,
        ._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers {
            font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
            line-height: 20px;
            vertical-align: top
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-code {
            position: relative;
            padding-right: 10px;
            padding-left: 10px;
            overflow: visible;
            font-size: 13px;
            color: #666;
            word-wrap: normal;
            white-space: pre
        }

    </style>
</head>
<body>
<div class="_29HP61GA_0">
<h1>55-äº«å…ƒæ¨¡å¼ï¼ˆä¸‹ï¼‰ï¼šå‰–æäº«å…ƒæ¨¡å¼åœ¨JavaIntegerã€Stringä¸­çš„åº”ç”¨</h1>
<p>ä¸Šä¸€èŠ‚è¯¾ï¼Œæˆ‘ä»¬é€šè¿‡æ£‹ç‰Œæ¸¸æˆå’Œæ–‡æœ¬ç¼–è¾‘å™¨è¿™æ ·ä¸¤ä¸ªå®é™…çš„ä¾‹å­ï¼Œå­¦ä¹ äº†äº«å…ƒæ¨¡å¼çš„åŸç†ã€å®ç°ä»¥åŠåº”ç”¨åœºæ™¯ã€‚ç”¨ä¸€å¥è¯æ€»ç»“ä¸€ä¸‹ï¼Œäº«å…ƒæ¨¡å¼ä¸­çš„â€œäº«å…ƒâ€æŒ‡è¢«å…±äº«çš„å•å…ƒã€‚äº«å…ƒæ¨¡å¼é€šè¿‡å¤ç”¨å¯¹è±¡ï¼Œä»¥è¾¾åˆ°èŠ‚çœå†…å­˜çš„ç›®çš„ã€‚</p><p>ä»Šå¤©ï¼Œæˆ‘å†ç”¨ä¸€èŠ‚è¯¾çš„æ—¶é—´å¸¦ä½ å‰–æä¸€ä¸‹ï¼Œäº«å…ƒæ¨¡å¼åœ¨Java Integerã€Stringä¸­çš„åº”ç”¨ã€‚å¦‚æœä½ ä¸ç†Ÿæ‚‰Javaç¼–ç¨‹è¯­è¨€ï¼Œé‚£ä¹Ÿä¸ç”¨æ‹…å¿ƒçœ‹ä¸æ‡‚ï¼Œå› ä¸ºä»Šå¤©çš„å†…å®¹ä¸»è¦è¿˜æ˜¯ä»‹ç»è®¾è®¡æ€è·¯ï¼Œè·Ÿè¯­è¨€æœ¬èº«å…³ç³»ä¸å¤§ã€‚</p><p>è¯ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬æ­£å¼å¼€å§‹ä»Šå¤©çš„å­¦ä¹ å§ï¼</p><h2>äº«å…ƒæ¨¡å¼åœ¨Java Integerä¸­çš„åº”ç”¨</h2><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹é¢è¿™æ ·ä¸€æ®µä»£ç ã€‚ä½ å¯ä»¥å…ˆæ€è€ƒä¸‹ï¼Œè¿™æ®µä»£ç ä¼šè¾“å‡ºä»€ä¹ˆæ ·çš„ç»“æœã€‚</p><pre><code>Integer i1 = 56;
Integer i2 = 56;
Integer i3 = 129;
Integer i4 = 129;
System.out.println(i1 == i2);
System.out.println(i3 == i4);
</code></pre><p>å¦‚æœä¸ç†Ÿæ‚‰Javaè¯­è¨€ï¼Œä½ å¯èƒ½ä¼šè§‰å¾—ï¼Œi1å’Œi2å€¼éƒ½æ˜¯56ï¼Œi3å’Œi4å€¼éƒ½æ˜¯129ï¼Œi1è·Ÿi2å€¼ç›¸ç­‰ï¼Œi3è·Ÿi4å€¼ç›¸ç­‰ï¼Œæ‰€ä»¥è¾“å‡ºç»“æœåº”è¯¥æ˜¯ä¸¤ä¸ªtrueã€‚è¿™æ ·çš„åˆ†ææ˜¯ä¸å¯¹çš„ï¼Œä¸»è¦è¿˜æ˜¯å› ä¸ºä½ å¯¹Javaè¯­æ³•ä¸ç†Ÿæ‚‰ã€‚è¦æ­£ç¡®åœ°åˆ†æä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬éœ€è¦å¼„æ¸…æ¥šä¸‹é¢ä¸¤ä¸ªé—®é¢˜ï¼š</p><ul>
<li>å¦‚ä½•åˆ¤å®šä¸¤ä¸ªJavaå¯¹è±¡æ˜¯å¦ç›¸ç­‰ï¼ˆä¹Ÿå°±ä»£ç ä¸­çš„â€œ==â€æ“ä½œç¬¦çš„å«ä¹‰ï¼‰ï¼Ÿ</li>
<li>ä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…ç®±ï¼ˆAutoboxingï¼‰å’Œè‡ªåŠ¨æ‹†ç®±ï¼ˆUnboxingï¼‰ï¼Ÿ</li>
</ul><p>åœ¨<a href="https://time.geekbang.org/column/article/166698">åŠ é¤ä¸€</a>ä¸­ï¼Œæˆ‘ä»¬è®²åˆ°ï¼ŒJavaä¸ºåŸºæœ¬æ•°æ®ç±»å‹æä¾›äº†å¯¹åº”çš„åŒ…è£…å™¨ç±»å‹ã€‚å…·ä½“å¦‚ä¸‹æ‰€ç¤ºï¼š</p><!-- [[[read_end]]] --><p><img src="https://static001.geekbang.org/resource/image/5f/a0/5f93c0412c9ee8b563383c3583693ba0.jpg" alt=""></p><p>æ‰€è°“çš„è‡ªåŠ¨è£…ç®±ï¼Œå°±æ˜¯è‡ªåŠ¨å°†åŸºæœ¬æ•°æ®ç±»å‹è½¬æ¢ä¸ºåŒ…è£…å™¨ç±»å‹ã€‚æ‰€è°“çš„è‡ªåŠ¨æ‹†ç®±ï¼Œä¹Ÿå°±æ˜¯è‡ªåŠ¨å°†åŒ…è£…å™¨ç±»å‹è½¬åŒ–ä¸ºåŸºæœ¬æ•°æ®ç±»å‹ã€‚å…·ä½“çš„ä»£ç ç¤ºä¾‹å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>Integer i = 56; //è‡ªåŠ¨è£…ç®±
int j = i; //è‡ªåŠ¨æ‹†ç®±
</code></pre><p>æ•°å€¼56æ˜¯åŸºæœ¬æ•°æ®ç±»å‹intï¼Œå½“èµ‹å€¼ç»™åŒ…è£…å™¨ç±»å‹ï¼ˆIntegerï¼‰å˜é‡çš„æ—¶å€™ï¼Œè§¦å‘è‡ªåŠ¨è£…ç®±æ“ä½œï¼Œåˆ›å»ºä¸€ä¸ªIntegerç±»å‹çš„å¯¹è±¡ï¼Œå¹¶ä¸”èµ‹å€¼ç»™å˜é‡iã€‚å…¶åº•å±‚ç›¸å½“äºæ‰§è¡Œäº†ä¸‹é¢è¿™æ¡è¯­å¥ï¼š</p><pre><code>Integer i = 59ï¼›åº•å±‚æ‰§è¡Œäº†ï¼šInteger i = Integer.valueOf(59);
</code></pre><p>åè¿‡æ¥ï¼Œå½“æŠŠåŒ…è£…å™¨ç±»å‹çš„å˜é‡iï¼Œèµ‹å€¼ç»™åŸºæœ¬æ•°æ®ç±»å‹å˜é‡jçš„æ—¶å€™ï¼Œè§¦å‘è‡ªåŠ¨æ‹†ç®±æ“ä½œï¼Œå°†iä¸­çš„æ•°æ®å–å‡ºï¼Œèµ‹å€¼ç»™jã€‚å…¶åº•å±‚ç›¸å½“äºæ‰§è¡Œäº†ä¸‹é¢è¿™æ¡è¯­å¥ï¼š</p><pre><code>int j = i; åº•å±‚æ‰§è¡Œäº†ï¼šint j = i.intValue();
</code></pre><p>å¼„æ¸…æ¥šäº†è‡ªåŠ¨è£…ç®±å’Œè‡ªåŠ¨æ‹†ç®±ï¼Œæˆ‘ä»¬å†æ¥çœ‹ï¼Œå¦‚ä½•åˆ¤å®šä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ï¼Ÿä¸è¿‡ï¼Œåœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè¦ææ¸…æ¥šï¼ŒJavaå¯¹è±¡åœ¨å†…å­˜ä¸­æ˜¯å¦‚ä½•å­˜å‚¨çš„ã€‚æˆ‘ä»¬é€šè¿‡ä¸‹é¢è¿™ä¸ªä¾‹å­æ¥è¯´æ˜ä¸€ä¸‹ã€‚</p><pre><code>User a = new User(123, 23); // id=123, age=23
</code></pre><p>é’ˆå¯¹è¿™æ¡è¯­å¥ï¼Œæˆ‘ç”»äº†ä¸€å¼ å†…å­˜å­˜å‚¨ç»“æ„å›¾ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚aå­˜å‚¨çš„å€¼æ˜¯Userå¯¹è±¡çš„å†…å­˜åœ°å€ï¼Œåœ¨å›¾ä¸­å°±è¡¨ç°ä¸ºaæŒ‡å‘Userå¯¹è±¡ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/04/dc/04f879d7d72b96965f4e06a21ff13bdc.jpg" alt=""></p><p>å½“æˆ‘ä»¬é€šè¿‡â€œ==â€æ¥åˆ¤å®šä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰çš„æ—¶å€™ï¼Œå®é™…ä¸Šæ˜¯åœ¨åˆ¤æ–­ä¸¤ä¸ªå±€éƒ¨å˜é‡å­˜å‚¨çš„åœ°å€æ˜¯å¦ç›¸åŒï¼Œæ¢å¥è¯è¯´ï¼Œæ˜¯åœ¨åˆ¤æ–­ä¸¤ä¸ªå±€éƒ¨å˜é‡æ˜¯å¦æŒ‡å‘ç›¸åŒçš„å¯¹è±¡ã€‚</p><p>äº†è§£äº†Javaçš„è¿™å‡ ä¸ªè¯­æ³•ä¹‹åï¼Œæˆ‘ä»¬é‡æ–°çœ‹ä¸€ä¸‹å¼€å¤´çš„é‚£æ®µä»£ç ã€‚</p><pre><code>Integer i1 = 56;
Integer i2 = 56;
Integer i3 = 129;
Integer i4 = 129;
System.out.println(i1 == i2);
System.out.println(i3 == i4);
</code></pre><p>å‰4è¡Œèµ‹å€¼è¯­å¥éƒ½ä¼šè§¦å‘è‡ªåŠ¨è£…ç®±æ“ä½œï¼Œä¹Ÿå°±æ˜¯ä¼šåˆ›å»ºIntegerå¯¹è±¡å¹¶ä¸”èµ‹å€¼ç»™i1ã€i2ã€i3ã€i4è¿™å››ä¸ªå˜é‡ã€‚æ ¹æ®åˆšåˆšçš„è®²è§£ï¼Œi1ã€i2å°½ç®¡å­˜å‚¨çš„æ•°å€¼ç›¸åŒï¼Œéƒ½æ˜¯56ï¼Œä½†æ˜¯æŒ‡å‘ä¸åŒçš„Integerå¯¹è±¡ï¼Œæ‰€ä»¥é€šè¿‡â€œ==â€æ¥åˆ¤å®šæ˜¯å¦ç›¸åŒçš„æ—¶å€™ï¼Œä¼šè¿”å›falseã€‚åŒç†ï¼Œi3==i4åˆ¤å®šè¯­å¥ä¹Ÿä¼šè¿”å›falseã€‚</p><p>ä¸è¿‡ï¼Œä¸Šé¢çš„åˆ†æè¿˜æ˜¯ä¸å¯¹ï¼Œç­”æ¡ˆå¹¶éæ˜¯ä¸¤ä¸ªfalseï¼Œè€Œæ˜¯ä¸€ä¸ªtrueï¼Œä¸€ä¸ªfalseã€‚çœ‹åˆ°è¿™é‡Œï¼Œä½ å¯èƒ½ä¼šæ¯”è¾ƒçº³é—·äº†ã€‚å®é™…ä¸Šï¼Œè¿™æ­£æ˜¯å› ä¸ºIntegerç”¨åˆ°äº†äº«å…ƒæ¨¡å¼æ¥å¤ç”¨å¯¹è±¡ï¼Œæ‰å¯¼è‡´äº†è¿™æ ·çš„è¿è¡Œç»“æœã€‚å½“æˆ‘ä»¬é€šè¿‡è‡ªåŠ¨è£…ç®±ï¼Œä¹Ÿå°±æ˜¯è°ƒç”¨valueOf()æ¥åˆ›å»ºIntegerå¯¹è±¡çš„æ—¶å€™ï¼Œå¦‚æœè¦åˆ›å»ºçš„Integerå¯¹è±¡çš„å€¼åœ¨-128åˆ°127ä¹‹é—´ï¼Œä¼šä»IntegerCacheç±»ä¸­ç›´æ¥è¿”å›ï¼Œå¦åˆ™æ‰è°ƒç”¨newæ–¹æ³•åˆ›å»ºã€‚çœ‹ä»£ç æ›´åŠ æ¸…æ™°ä¸€äº›ï¼ŒIntegerç±»çš„valueOf()å‡½æ•°çš„å…·ä½“ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>public static Integer valueOf(int i) {
    if (i &gt;= IntegerCache.low &amp;&amp; i &lt;= IntegerCache.high)
        return IntegerCache.cache[i + (-IntegerCache.low)];
    return new Integer(i);
}
</code></pre><p>å®é™…ä¸Šï¼Œè¿™é‡Œçš„IntegerCacheç›¸å½“äºï¼Œæˆ‘ä»¬ä¸Šä¸€èŠ‚è¯¾ä¸­è®²çš„ç”Ÿæˆäº«å…ƒå¯¹è±¡çš„å·¥å‚ç±»ï¼Œåªä¸è¿‡åå­—ä¸å«xxxFactoryè€Œå·²ã€‚æˆ‘ä»¬æ¥çœ‹å®ƒçš„å…·ä½“ä»£ç å®ç°ã€‚è¿™ä¸ªç±»æ˜¯Integerçš„å†…éƒ¨ç±»ï¼Œä½ ä¹Ÿå¯ä»¥è‡ªè¡ŒæŸ¥çœ‹JDKæºç ã€‚</p><pre><code>/**
 * Cache to support the object identity semantics of autoboxing for values between
 * -128 and 127 (inclusive) as required by JLS.
 *
 * The cache is initialized on first usage.  The size of the cache
 * may be controlled by the {@code -XX:AutoBoxCacheMax=&lt;size&gt;} option.
 * During VM initialization, java.lang.Integer.IntegerCache.high property
 * may be set and saved in the private system properties in the
 * sun.misc.VM class.
 */
private static class IntegerCache {
    static final int low = -128;
    static final int high;
    static final Integer cache[];

    static {
        // high value may be configured by property
        int h = 127;
        String integerCacheHighPropValue =
            sun.misc.VM.getSavedProperty(&quot;java.lang.Integer.IntegerCache.high&quot;);
        if (integerCacheHighPropValue != null) {
            try {
                int i = parseInt(integerCacheHighPropValue);
                i = Math.max(i, 127);
                // Maximum array size is Integer.MAX_VALUE
                h = Math.min(i, Integer.MAX_VALUE - (-low) -1);
            } catch( NumberFormatException nfe) {
                // If the property cannot be parsed into an int, ignore it.
            }
        }
        high = h;

        cache = new Integer[(high - low) + 1];
        int j = low;
        for(int k = 0; k &lt; cache.length; k++)
            cache[k] = new Integer(j++);

        // range [-128, 127] must be interned (JLS7 5.1.7)
        assert IntegerCache.high &gt;= 127;
    }

    private IntegerCache() {}
}
</code></pre><p>ä¸ºä»€ä¹ˆIntegerCacheåªç¼“å­˜-128åˆ°127ä¹‹é—´çš„æ•´å‹å€¼å‘¢ï¼Ÿ</p><p>åœ¨IntegerCacheçš„ä»£ç å®ç°ä¸­ï¼Œå½“è¿™ä¸ªç±»è¢«åŠ è½½çš„æ—¶å€™ï¼Œç¼“å­˜çš„äº«å…ƒå¯¹è±¡ä¼šè¢«é›†ä¸­ä¸€æ¬¡æ€§åˆ›å»ºå¥½ã€‚æ¯•ç«Ÿæ•´å‹å€¼å¤ªå¤šäº†ï¼Œæˆ‘ä»¬ä¸å¯èƒ½åœ¨IntegerCacheç±»ä¸­é¢„å…ˆåˆ›å»ºå¥½æ‰€æœ‰çš„æ•´å‹å€¼ï¼Œè¿™æ ·æ—¢å ç”¨å¤ªå¤šå†…å­˜ï¼Œä¹Ÿä½¿å¾—åŠ è½½IntegerCacheç±»çš„æ—¶é—´è¿‡é•¿ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åªèƒ½é€‰æ‹©ç¼“å­˜å¯¹äºå¤§éƒ¨åˆ†åº”ç”¨æ¥è¯´æœ€å¸¸ç”¨çš„æ•´å‹å€¼ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå­—èŠ‚çš„å¤§å°ï¼ˆ-128åˆ°127ä¹‹é—´çš„æ•°æ®ï¼‰ã€‚</p><p>å®é™…ä¸Šï¼ŒJDKä¹Ÿæä¾›äº†æ–¹æ³•æ¥è®©æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ç¼“å­˜çš„æœ€å¤§å€¼ï¼Œæœ‰ä¸‹é¢ä¸¤ç§æ–¹å¼ã€‚å¦‚æœä½ é€šè¿‡åˆ†æåº”ç”¨çš„JVMå†…å­˜å ç”¨æƒ…å†µï¼Œå‘ç°-128åˆ°255ä¹‹é—´çš„æ•°æ®å ç”¨çš„å†…å­˜æ¯”è¾ƒå¤šï¼Œä½ å°±å¯ä»¥ç”¨å¦‚ä¸‹æ–¹å¼ï¼Œå°†ç¼“å­˜çš„æœ€å¤§å€¼ä»127è°ƒæ•´åˆ°255ã€‚ä¸è¿‡ï¼Œè¿™é‡Œæ³¨æ„ä¸€ä¸‹ï¼ŒJDKå¹¶æ²¡æœ‰æä¾›è®¾ç½®æœ€å°å€¼çš„æ–¹æ³•ã€‚</p><pre><code>//æ–¹æ³•ä¸€ï¼š
-Djava.lang.Integer.IntegerCache.high=255
//æ–¹æ³•äºŒï¼š
-XX:AutoBoxCacheMax=255
</code></pre><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬å†å›åˆ°æœ€å¼€å§‹çš„é—®é¢˜ï¼Œå› ä¸º56å¤„äº-128å’Œ127ä¹‹é—´ï¼Œi1å’Œi2ä¼šæŒ‡å‘ç›¸åŒçš„äº«å…ƒå¯¹è±¡ï¼Œæ‰€ä»¥i1==i2è¿”å›trueã€‚è€Œ129å¤§äº127ï¼Œå¹¶ä¸ä¼šè¢«ç¼“å­˜ï¼Œæ¯æ¬¡éƒ½ä¼šåˆ›å»ºä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œi3å’Œi4æŒ‡å‘ä¸åŒçš„Integerå¯¹è±¡ï¼Œæ‰€ä»¥i3==i4è¿”å›falseã€‚</p><p>å®é™…ä¸Šï¼Œé™¤äº†Integerç±»å‹ä¹‹å¤–ï¼Œå…¶ä»–åŒ…è£…å™¨ç±»å‹ï¼Œæ¯”å¦‚Longã€Shortã€Byteç­‰ï¼Œä¹Ÿéƒ½åˆ©ç”¨äº†äº«å…ƒæ¨¡å¼æ¥ç¼“å­˜-128åˆ°127ä¹‹é—´çš„æ•°æ®ã€‚æ¯”å¦‚ï¼ŒLongç±»å‹å¯¹åº”çš„LongCacheäº«å…ƒå·¥å‚ç±»åŠvalueOf()å‡½æ•°ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>private static class LongCache {
    private LongCache(){}

    static final Long cache[] = new Long[-(-128) + 127 + 1];

    static {
        for(int i = 0; i &lt; cache.length; i++)
            cache[i] = new Long(i - 128);
    }
}

public static Long valueOf(long l) {
    final int offset = 128;
    if (l &gt;= -128 &amp;&amp; l &lt;= 127) { // will cache
        return LongCache.cache[(int)l + offset];
    }
    return new Long(l);
}
</code></pre><p>åœ¨æˆ‘ä»¬å¹³æ—¶çš„å¼€å‘ä¸­ï¼Œå¯¹äºä¸‹é¢è¿™æ ·ä¸‰ç§åˆ›å»ºæ•´å‹å¯¹è±¡çš„æ–¹å¼ï¼Œæˆ‘ä»¬ä¼˜å…ˆä½¿ç”¨åä¸¤ç§ã€‚</p><pre><code>Integer a = new Integer(123);
Integer a = 123;
Integer a = Integer.valueOf(123);
</code></pre><p>ç¬¬ä¸€ç§åˆ›å»ºæ–¹å¼å¹¶ä¸ä¼šä½¿ç”¨åˆ°IntegerCacheï¼Œè€Œåé¢ä¸¤ç§åˆ›å»ºæ–¹æ³•å¯ä»¥åˆ©ç”¨IntegerCacheç¼“å­˜ï¼Œè¿”å›å…±äº«çš„å¯¹è±¡ï¼Œä»¥è¾¾åˆ°èŠ‚çœå†…å­˜çš„ç›®çš„ã€‚ä¸¾ä¸€ä¸ªæç«¯ä¸€ç‚¹çš„ä¾‹å­ï¼Œå‡è®¾ç¨‹åºéœ€è¦åˆ›å»º1ä¸‡ä¸ª-128åˆ°127ä¹‹é—´çš„Integerå¯¹è±¡ã€‚ä½¿ç”¨ç¬¬ä¸€ç§åˆ›å»ºæ–¹å¼ï¼Œæˆ‘ä»¬éœ€è¦åˆ†é…1ä¸‡ä¸ªIntegerå¯¹è±¡çš„å†…å­˜ç©ºé—´ï¼›ä½¿ç”¨åä¸¤ç§åˆ›å»ºæ–¹å¼ï¼Œæˆ‘ä»¬æœ€å¤šåªéœ€è¦åˆ†é…256ä¸ªIntegerå¯¹è±¡çš„å†…å­˜ç©ºé—´ã€‚</p><h2>äº«å…ƒæ¨¡å¼åœ¨Java Stringä¸­çš„åº”ç”¨</h2><p>åˆšåˆšæˆ‘ä»¬è®²äº†äº«å…ƒæ¨¡å¼åœ¨Java Integerç±»ä¸­çš„åº”ç”¨ï¼Œç°åœ¨ï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸‹ï¼Œäº«å…ƒæ¨¡å¼åœ¨Java Stringç±»ä¸­çš„åº”ç”¨ã€‚åŒæ ·ï¼Œæˆ‘ä»¬è¿˜æ˜¯å…ˆæ¥çœ‹ä¸€æ®µä»£ç ï¼Œä½ è§‰å¾—è¿™æ®µä»£ç è¾“å‡ºçš„ç»“æœæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><pre><code>String s1 = &quot;å°äº‰å“¥&quot;;
String s2 = &quot;å°äº‰å“¥&quot;;
String s3 = new String(&quot;å°äº‰å“¥&quot;);

System.out.println(s1 == s2);
System.out.println(s1 == s3);
</code></pre><p>ä¸Šé¢ä»£ç çš„è¿è¡Œç»“æœæ˜¯ï¼šä¸€ä¸ªtrueï¼Œä¸€ä¸ªfalseã€‚è·ŸIntegerç±»çš„è®¾è®¡æ€è·¯ç›¸ä¼¼ï¼ŒStringç±»åˆ©ç”¨äº«å…ƒæ¨¡å¼æ¥å¤ç”¨ç›¸åŒçš„å­—ç¬¦ä¸²å¸¸é‡ï¼ˆä¹Ÿå°±æ˜¯ä»£ç ä¸­çš„â€œå°äº‰å“¥â€ï¼‰ã€‚JVMä¼šä¸“é—¨å¼€è¾Ÿä¸€å—å­˜å‚¨åŒºæ¥å­˜å‚¨å­—ç¬¦ä¸²å¸¸é‡ï¼Œè¿™å—å­˜å‚¨åŒºå«ä½œâ€œå­—ç¬¦ä¸²å¸¸é‡æ± â€ã€‚ä¸Šé¢ä»£ç å¯¹åº”çš„å†…å­˜å­˜å‚¨ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://static001.geekbang.org/resource/image/2d/2d/2dfc18575c22efccca191c566b24a22d.jpg" alt=""></p><p>ä¸è¿‡ï¼ŒStringç±»çš„äº«å…ƒæ¨¡å¼çš„è®¾è®¡ï¼Œè·ŸIntegerç±»ç¨å¾®æœ‰äº›ä¸åŒã€‚Integerç±»ä¸­è¦å…±äº«çš„å¯¹è±¡ï¼Œæ˜¯åœ¨ç±»åŠ è½½çš„æ—¶å€™ï¼Œå°±é›†ä¸­ä¸€æ¬¡æ€§åˆ›å»ºå¥½çš„ã€‚ä½†æ˜¯ï¼Œå¯¹äºå­—ç¬¦ä¸²æ¥è¯´ï¼Œæˆ‘ä»¬æ²¡æ³•äº‹å…ˆçŸ¥é“è¦å…±äº«å“ªäº›å­—ç¬¦ä¸²å¸¸é‡ï¼Œæ‰€ä»¥æ²¡åŠæ³•äº‹å…ˆåˆ›å»ºå¥½ï¼Œåªèƒ½åœ¨æŸä¸ªå­—ç¬¦ä¸²å¸¸é‡ç¬¬ä¸€æ¬¡è¢«ç”¨åˆ°çš„æ—¶å€™ï¼Œå­˜å‚¨åˆ°å¸¸é‡æ± ä¸­ï¼Œå½“ä¹‹åå†ç”¨åˆ°çš„æ—¶å€™ï¼Œç›´æ¥å¼•ç”¨å¸¸é‡æ± ä¸­å·²ç»å­˜åœ¨çš„å³å¯ï¼Œå°±ä¸éœ€è¦å†é‡æ–°åˆ›å»ºäº†ã€‚</p><h2>é‡ç‚¹å›é¡¾</h2><p>å¥½äº†ï¼Œä»Šå¤©çš„å†…å®¹åˆ°æ­¤å°±è®²å®Œäº†ã€‚æˆ‘ä»¬ä¸€å—æ¥æ€»ç»“å›é¡¾ä¸€ä¸‹ï¼Œä½ éœ€è¦é‡ç‚¹æŒæ¡çš„å†…å®¹ã€‚</p><p>åœ¨Java Integerçš„å®ç°ä¸­ï¼Œ-128åˆ°127ä¹‹é—´çš„æ•´å‹å¯¹è±¡ä¼šè¢«äº‹å…ˆåˆ›å»ºå¥½ï¼Œç¼“å­˜åœ¨IntegerCacheç±»ä¸­ã€‚å½“æˆ‘ä»¬ä½¿ç”¨è‡ªåŠ¨è£…ç®±æˆ–è€…valueOf()æ¥åˆ›å»ºè¿™ä¸ªæ•°å€¼åŒºé—´çš„æ•´å‹å¯¹è±¡æ—¶ï¼Œä¼šå¤ç”¨IntegerCacheç±»äº‹å…ˆåˆ›å»ºå¥½çš„å¯¹è±¡ã€‚è¿™é‡Œçš„IntegerCacheç±»å°±æ˜¯äº«å…ƒå·¥å‚ç±»ï¼Œäº‹å…ˆåˆ›å»ºå¥½çš„æ•´å‹å¯¹è±¡å°±æ˜¯äº«å…ƒå¯¹è±¡ã€‚</p><p>åœ¨Java Stringç±»çš„å®ç°ä¸­ï¼ŒJVMå¼€è¾Ÿä¸€å—å­˜å‚¨åŒºä¸“é—¨å­˜å‚¨å­—ç¬¦ä¸²å¸¸é‡ï¼Œè¿™å—å­˜å‚¨åŒºå«ä½œå­—ç¬¦ä¸²å¸¸é‡æ± ï¼Œç±»ä¼¼äºIntegerä¸­çš„IntegerCacheã€‚ä¸è¿‡ï¼Œè·ŸIntegerCacheä¸åŒçš„æ˜¯ï¼Œå®ƒå¹¶éäº‹å…ˆåˆ›å»ºå¥½éœ€è¦å…±äº«çš„å¯¹è±¡ï¼Œè€Œæ˜¯åœ¨ç¨‹åºçš„è¿è¡ŒæœŸé—´ï¼Œæ ¹æ®éœ€è¦æ¥åˆ›å»ºå’Œç¼“å­˜å­—ç¬¦ä¸²å¸¸é‡ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿™é‡Œæˆ‘å†è¡¥å……å¼ºè°ƒä¸€ä¸‹ã€‚</p><p>å®é™…ä¸Šï¼Œäº«å…ƒæ¨¡å¼å¯¹JVMçš„åƒåœ¾å›æ”¶å¹¶ä¸å‹å¥½ã€‚å› ä¸ºäº«å…ƒå·¥å‚ç±»ä¸€ç›´ä¿å­˜äº†å¯¹äº«å…ƒå¯¹è±¡çš„å¼•ç”¨ï¼Œè¿™å°±å¯¼è‡´äº«å…ƒå¯¹è±¡åœ¨æ²¡æœ‰ä»»ä½•ä»£ç ä½¿ç”¨çš„æƒ…å†µä¸‹ï¼Œä¹Ÿå¹¶ä¸ä¼šè¢«JVMåƒåœ¾å›æ”¶æœºåˆ¶è‡ªåŠ¨å›æ”¶æ‰ã€‚å› æ­¤ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¦‚æœå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå¾ˆçŸ­ï¼Œä¹Ÿä¸ä¼šè¢«å¯†é›†ä½¿ç”¨ï¼Œåˆ©ç”¨äº«å…ƒæ¨¡å¼åå€’å¯èƒ½ä¼šæµªè´¹æ›´å¤šçš„å†…å­˜ã€‚æ‰€ä»¥ï¼Œé™¤éç»è¿‡çº¿ä¸ŠéªŒè¯ï¼Œåˆ©ç”¨äº«å…ƒæ¨¡å¼çœŸçš„å¯ä»¥å¤§å¤§èŠ‚çœå†…å­˜ï¼Œå¦åˆ™ï¼Œå°±ä¸è¦è¿‡åº¦ä½¿ç”¨è¿™ä¸ªæ¨¡å¼ï¼Œä¸ºäº†ä¸€ç‚¹ç‚¹å†…å­˜çš„èŠ‚çœè€Œå¼•å…¥ä¸€ä¸ªå¤æ‚çš„è®¾è®¡æ¨¡å¼ï¼Œå¾—ä¸å¿å¤±å•Šã€‚</p><h2>è¯¾å ‚è®¨è®º</h2><p>IntegerCacheåªèƒ½ç¼“å­˜äº‹å…ˆæŒ‡å®šå¥½çš„æ•´å‹å¯¹è±¡ï¼Œé‚£æˆ‘ä»¬æ˜¯å¦å¯ä»¥å€Ÿé‰´Stringçš„è®¾è®¡æ€è·¯ï¼Œä¸äº‹å…ˆæŒ‡å®šéœ€è¦ç¼“å­˜å“ªäº›æ•´å‹å¯¹è±¡ï¼Œè€Œæ˜¯åœ¨ç¨‹åºçš„è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå½“ç”¨åˆ°æŸä¸ªæ•´å‹å¯¹è±¡çš„æ—¶å€™ï¼Œåˆ›å»ºå¥½æ”¾ç½®åˆ°IntegerCacheï¼Œä¸‹æ¬¡å†è¢«ç”¨åˆ°çš„æ—¶å€™ï¼Œç›´æ¥ä»IntegerCacheä¸­è¿”å›å‘¢ï¼Ÿ</p><p>å¦‚æœå¯ä»¥è¿™ä¹ˆåšï¼Œè¯·ä½ æŒ‰ç…§è¿™ä¸ªæ€è·¯é‡æ–°å®ç°ä¸€ä¸‹IntegerCacheç±»ï¼Œå¹¶ä¸”èƒ½å¤Ÿåšåˆ°åœ¨æŸä¸ªå¯¹è±¡æ²¡æœ‰ä»»ä½•ä»£ç ä½¿ç”¨çš„æ—¶å€™ï¼Œèƒ½è¢«JVMåƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶æ‰ã€‚</p><p>æ¬¢è¿ç•™è¨€å’Œæˆ‘åˆ†äº«ä½ çš„æƒ³æ³•ï¼Œå¦‚æœæœ‰æ”¶è·ï¼Œæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚</p><h2>ç²¾é€‰ç•™è¨€ï¼š</h2>
        <ul>
        
<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            Peter Cheng  2020-03-09 11:10:31
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            è¯¾åé¢˜ã€‚å› ä¸ºæ•´å‹å¯¹è±¡é•¿åº¦å›ºå®šï¼Œä¸”å†…å®¹å›ºå®šï¼Œå¯ä»¥ç›´æ¥ç”³è¯·ä¸€å—è¿ç»­çš„å†…å­˜åœ°å€ï¼Œå¯ä»¥åŠ å¿«è®¿é—®ï¼ŒèŠ‚çœå†…å­˜ï¼Ÿè€ŒStringç±»ä¸è¡Œã€‚ [4èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            Liam  2020-03-09 09:22:40
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            äº«å…ƒæ± ç”¨weak referenceæŒæœ‰äº«å…ƒå¯¹è±¡ [4èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            å°æ™å­  2020-03-09 22:48:30
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            å¦‚æœIntegerCacheä¸äº‹å…ˆæŒ‡å®šç¼“å­˜å“ªäº›æ•´å½¢å¯¹è±¡ï¼Œé‚£ä¹ˆæ¯æ¬¡ç”¨åˆ°çš„æ—¶å€™å»newä¸€ä¸ªï¼Œè¿™æ ·ä¼šç¨å¾®å½±å“ä¸€äº›æ•ˆç‡ï¼Œå°¤å…¶åœ¨æŸäº›æƒ…å†µä¸‹å¦‚æœå¸¸ç”¨åˆ°-128~127ä¹‹é—´çš„æ•°ï¼Œå¯èƒ½ä¼šä¸åœçš„new&#47;delete, ä¸è¿‡è¿™ä¸ªæ€§èƒ½é—®é¢˜åœ¨å¤§éƒ¨åˆ†æ—¶å€™å½±å“ä¸æ˜¯å¾ˆå¤§ï¼Œæ‰€ä»¥æŒ‰ç…§stringçš„è®¾è®¡æ€è·¯ä¹Ÿæ˜¯å¯è¡Œçš„ï¼Œ<br>æŒ‰ç…§è¿™ä¸ªæ€è·¯è®¾è®¡IntegerCacheç±»çš„è¯ï¼Œå¦‚ä¸‹<br>private static class IntegerCache {<br><br>    public static final WeakHashMap&lt;Integer, WeakReference&lt;Integer&gt;&gt; cache = <br>        new WeakHashMap&lt;Integer, WeakReference&lt;Integer&gt;&gt;(); &#47;&#47;ä¹Ÿå¯ä»¥æå‰åˆ†é…å®¹é‡<br><br>    private IntegerCache(){}<br>}<br><br>public static Integer valueOf(int i) { <br>    final WeakReference&lt;Integer&gt; cached = IntegerCache.cache.get(i);<br>    if (cached != null) {<br>        final Integer value = cached.get(i);<br>        if (value != null) {<br>            return value;<br>        }<br>    }<br>    WeakReference&lt;Integer&gt; val = new WeakReference&lt;Integer&gt;(i);<br>    IntegerCache.cache.put(i, val);<br>    return val.get(); <br>} [1èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            webmin  2020-03-09 14:30:56
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            æŠ›ç –å¼•ç‰å®ç°äº†ä¸€ä¸ªæœ‰é™èŒƒå›´çš„ç¼“å­˜ï¼ˆ-128~2048383(127 * 127 * 127)ï¼‰<br>public class IntegerCache {<br>    private static final int bucketSize = 127;<br>    private static final int level1Max = bucketSize * bucketSize;<br>    private static final int max = bucketSize * bucketSize * bucketSize;<br>    private static final WeakHashMap&lt;Integer, WeakHashMap&lt;Integer, WeakHashMap&lt;Integer,WeakReference&lt;Integer&gt;&gt;&gt;&gt; CACHE = new WeakHashMap&lt;&gt;();<br><br>    public static Integer intern(int integer) {<br>        if (integer &lt;= 127) {<br>            return integer;<br>        }<br><br>        if (integer &gt; max) {<br>            return integer;<br>        }<br><br>        synchronized (CACHE) {<br>            Integer l1 = 0;<br>            int tmp = integer;<br>            if(integer &gt;= level1Max){<br>                l1 = integer &#47; level1Max;<br>                integer -= level1Max;<br>            }<br>            Integer l2 = integer &#47; bucketSize;<br>            Integer mod = integer % bucketSize;<br>            WeakHashMap&lt;Integer, WeakHashMap&lt;Integer,WeakReference&lt;Integer&gt;&gt;&gt; level1 = CACHE.computeIfAbsent(l1, val -&gt; new WeakHashMap&lt;&gt;());<br>            WeakHashMap&lt;Integer,WeakReference&lt;Integer&gt;&gt; level2 =  level1.computeIfAbsent(l2, val -&gt; new WeakHashMap&lt;&gt;());<br>            WeakReference&lt;Integer&gt; cache = level2.computeIfAbsent(mod, val -&gt; new WeakReference&lt;&gt;(tmp));<br>            Integer val = cache.get();<br>            if (val == null) {<br>                val = integer;<br>                level2.put(mod, new WeakReference&lt;&gt;(val));<br>            }<br>            return val;<br>        }<br><br>    }<br><br>    public static int integersInCache() {<br>        synchronized (CACHE) {<br>            int sum = CACHE.size();<br>            for (Integer key : CACHE.keySet()) {<br>                WeakHashMap&lt;Integer, WeakHashMap&lt;Integer,WeakReference&lt;Integer&gt;&gt;&gt; tmp = CACHE.get(key);<br>                sum += tmp.size();<br>                for(Integer l2Key : tmp.keySet()) {<br>                    sum += tmp.get(l2Key).size();<br>                }<br>            }<br>            return sum;<br>        }<br>    }<br>} [1èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            é»„æ—æ™´  2020-03-09 07:51:19
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            æ‰“å¡ <br>åšjava çš„æˆ‘ç¬¬ä¸€é¢˜ç«Ÿç„¶åšé”™äº†<br>å¦‚æœå®šä¹‰ä¸ºint å°±è¿”å›ture äº†å§ğŸ˜‚ [1èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            VicentğŸ€  2020-03-10 00:26:43
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            çªç„¶æƒ³åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œæ± æŠ€æœ¯æœ‰æ²¡æœ‰ç±»ä¼¼äº«å…ƒè®¾è®¡æ¨¡å¼çš„å­˜åœ¨ï¼Œå…¬ç”¨å¯¹è±¡ï¼Œä¸è¿‡ä¼šå¢åŠ ä¸€äº›ä½¿ç”¨é™åˆ¶ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            webmin  2020-03-09 14:31:18
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            &#47;&#47;è°ƒç”¨ä¾‹å­<br>public class FlyweightExample {<br>    public static void main(String[] args) {<br>        Integer i = IntegerCache.intern(16129);<br>        System.out.println(&quot;16129:&quot; + i);<br><br>        i = IntegerCache.intern(1612);<br>        System.out.println(&quot;1612:&quot; + i);<br><br>        i = IntegerCache.intern(161);<br>        System.out.println(&quot;161:&quot; + i);<br><br>        i = IntegerCache.intern(127);<br>        System.out.println(&quot;127:&quot; + i);<br><br>        i = IntegerCache.intern(100);<br>        System.out.println(&quot;100:&quot; + i);<br><br>        i = IntegerCache.intern(16129);<br>        System.out.println(&quot;16129:&quot; + i);<br><br>        i = IntegerCache.intern(1612);<br>        System.out.println(&quot;1612:&quot; + i);<br><br>        i = IntegerCache.intern(161);<br>        System.out.println(&quot;161:&quot; + i);<br><br>        i = IntegerCache.intern(2048383);<br>        System.out.println(&quot;2048383:&quot; + i);<br><br>        i = IntegerCache.intern(16130);<br>        System.out.println(&quot;16130:&quot; + i);<br><br>        i = IntegerCache.intern(2048383);<br>        System.out.println(&quot;2048383:&quot; + i);<br><br>        i = IntegerCache.intern(16130);<br>        System.out.println(&quot;16130:&quot; + i);<br><br>        System.out.println(&quot;Integer objects in cache: &quot; + IntegerCache.integersInCache());<br>    }<br>} 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            ï¼Œ  2020-03-09 11:45:20
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            è¡¥å…… æ·±å…¥ç†è§£javaè™šæ‹Ÿæœº é‡Œçš„ä¸¤é“æœ‰æ„æ€çš„é¢˜,è¯·æ€è€ƒè¾“å‡ºç»“æœ:<br>è‡ªåŠ¨è£…ç®± æ‹†ç®±:<br> public static void main(String[] args){<br>        Integer a = 1;<br>        Integer b = 2;<br>        Integer c = 3;<br>        Integer d = 3;<br>        Integer e = 321;<br>        Integer f = 321;<br>        Long g = 3L;<br>        System.out.println(c==d);<br>        System.out.println(e==f);<br>        System.out.println(c==(a+b));<br>        System.out.println(c.equals(a+b));<br>        System.out.println(g ==(a+b));<br>        System.out.println(g.equals(a+b));<br>    }<br><br>è€ƒå¯ŸçŸ¥è¯†ç‚¹:Integerç¼“å­˜,equalså’Œ==<br>å­—ç¬¦ä¸²:<br> public static void main(String[] args) {<br>        String str1 = new StringBuilder(&quot;è®¡ç®—æœº&quot;).append(&quot;è½¯ä»¶&quot;).toString();<br>        System.out.println(str1==str1.intern());<br>        String str2 = new StringBuilder(&quot;ja&quot;).append(&quot;va&quot;).toString();<br>        System.out.println(str2==str2.intern());<br>    }<br>è€ƒå¯ŸçŸ¥è¯†ç‚¹:1.internçš„ä½œç”¨;2.ç© 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            Eden Ma  2020-03-09 10:53:52
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            çªç„¶ç†è§£OCä¸­NSStringç­‰ä¹Ÿç”¨åˆ°äº†äº«å…ƒè®¾è®¡æ¨¡å¼. 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            Frank  2020-03-09 08:51:10
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            æ‰“å¡ ä»Šå¤©å­¦ä¹ äº«å…ƒæ¨¡å¼ï¼ˆä¸‹ï¼‰ï¼Œæ”¶è·è¿›ä¸€æ­¥åŠ æ·±äº†å¯¹Stringç±»çš„å­—ç¬¦ä¸²å¸¸é‡æ± çš„ç†è§£ã€‚åœ¨jdkä¸­Integerå’ŒStringéƒ½ä½¿ç”¨äº†äº«å…ƒæ¨¡å¼æ¥å­˜å‚¨äº«å…ƒå¯¹è±¡ã€‚<br>Integerç±»ä¼šå­˜å‚¨-128~127ä¹‹é—´çš„æ•°å­—å¯¹åº”çš„åŒ…è£…ç±»å‹å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡çš„åˆ›å»ºæ—¶åœ¨ç±»åˆå§‹åŒ–é˜¶æ®µå°±åˆ›å»ºå¥½çš„ã€‚Stringç±»åœ¨è¿è¡Œæ—¶ä½¿ç”¨JVMæä¾›çš„ä¸€å—ç§°ä¹‹ä¸ºâ€œå­—ç¬¦ä¸²å¸¸é‡æ± â€çš„åŒºåŸŸä¸­æ¥å­˜å‚¨é¦–æ¬¡ä½¿ç”¨åˆ°çš„å­—ç¬¦ä¸²å¸¸é‡ï¼Œå½“åé¢å†æ¬¡ä½¿ç”¨åˆ°è¯¥å¸¸é‡æ—¶ï¼Œç›´æ¥å»å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­å–å‡ºå¼•ç”¨ä½¿ç”¨å³å¯ã€‚ç”±äºä½¿ç”¨å·¥å‚æ¥æ¥å­˜å‚¨äº«å…ƒå¯¹è±¡ï¼Œä½¿å¾—äº«å…ƒå¯¹è±¡åœ¨JVMçš„æ ¹æœç´¢ç®—æ³•ä¸­GC Rootså¯è¾¾ï¼Œå› æ­¤åƒåœ¾å›æ”¶æ•ˆæœä¸å‹å¥½ã€‚<br>è¯¾å ‚è®¨è®ºé¢˜ä¸­çš„â€œå¹¶ä¸”èƒ½å¤Ÿåšåˆ°åœ¨æŸä¸ªå¯¹è±¡æ²¡æœ‰ä»»ä½•ä»£ç ä½¿ç”¨çš„æ—¶å€™ï¼Œèƒ½è¢« JVM åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶æ‰â€ å¯¹åƒåœ¾å›æ”¶æœºåˆ¶ç†è§£ä¸æ·±ï¼Œä¸çŸ¥é“æœ‰å•¥å¥½åŠæ³•ã€‚ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            Jackey  2020-03-09 08:44:14
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            è¿™èŠ‚çš„ä¾‹å­å¯ä»¥æ‹¿æ¥åšç¬”è¯•çš„é¢˜ç›®ğŸ˜ƒ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            æ¯å¤©æ™’ç™½ç‰™  2020-03-09 08:41:39
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            æ–°çš„ä¸€å‘¨å¼€å§‹äº†ï¼ŒåšæŒè·Ÿä¸‹å» 
        </div>
        
    </div>
</li>
            </ul>
</div>
</body>
</html>