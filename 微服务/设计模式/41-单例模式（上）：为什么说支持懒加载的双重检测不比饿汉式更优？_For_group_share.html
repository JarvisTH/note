<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>41-å•ä¾‹æ¨¡å¼ï¼ˆä¸Šï¼‰ï¼šä¸ºä»€ä¹ˆè¯´æ”¯æŒæ‡’åŠ è½½çš„åŒé‡æ£€æµ‹ä¸æ¯”é¥¿æ±‰å¼æ›´ä¼˜ï¼Ÿ</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <style>
        html {
            color: #333;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
            text-rendering: optimizelegibility;
            font-family: Helvetica Neue, PingFang SC, Verdana, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif
        }

        html.borderbox *,
        html.borderbox :after,
        html.borderbox :before {
            box-sizing: border-box
        }

        article,
        aside,
        blockquote,
        body,
        button,
        code,
        dd,
        details,
        dl,
        dt,
        fieldset,
        figcaption,
        figure,
        footer,
        form,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        header,
        hr,
        input,
        legend,
        li,
        menu,
        nav,
        ol,
        p,
        pre,
        section,
        td,
        textarea,
        th,
        ul {
            margin: 0;
            padding: 0
        }

        article,
        aside,
        details,
        figcaption,
        figure,
        footer,
        header,
        menu,
        nav,
        section {
            display: block
        }

        audio,
        canvas,
        video {
            display: inline-block
        }

        body,
        button,
        input,
        select,
        textarea {
            font: 300 1em/1.8 PingFang SC, Lantinghei SC, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, Helvetica, sans-serif
        }

        button::-moz-focus-inner,
        input::-moz-focus-inner {
            padding: 0;
            border: 0
        }

        table {
            border-collapse: collapse;
            border-spacing: 0
        }

        fieldset,
        img {
            border: 0
        }

        blockquote {
            position: relative;
            color: #999;
            font-weight: 400;
            border-left: 1px solid #1abc9c;
            padding-left: 1em;
            margin: 1em 3em 1em 2em
        }

        @media only screen and (max-width: 640px) {
            blockquote {
                margin: 1em 0
            }
        }

        abbr,
        acronym {
            border-bottom: 1px dotted;
            font-variant: normal
        }

        abbr {
            cursor: help
        }

        del {
            text-decoration: line-through
        }

        address,
        caption,
        cite,
        code,
        dfn,
        em,
        th,
        var {
            font-style: normal;
            font-weight: 400
        }

        ol,
        ul {
            list-style: none
        }

        caption,
        th {
            text-align: left
        }

        q:after,
        q:before {
            content: ""
        }

        sub,
        sup {
            font-size: 75%;
            line-height: 0;
            position: relative
        }

        :root sub,
        :root sup {
            vertical-align: baseline
        }

        sup {
            top: -.5em
        }

        sub {
            bottom: -.25em
        }

        a {
            color: #1abc9c
        }

        a:hover {
            text-decoration: underline
        }

        .typo a {
            border-bottom: 1px solid #1abc9c
        }

        .typo a:hover {
            border-bottom-color: #555;
            color: #555
        }

        .typo a:hover,
        a,
        ins {
            text-decoration: none
        }

        .typo-u,
        u {
            text-decoration: underline
        }

        mark {
            background: #fffdd1;
            border-bottom: 1px solid #ffedce;
            padding: 2px;
            margin: 0 5px
        }

        code,
        pre,
        pre tt {
            font-family: Courier, Courier New, monospace
        }

        pre {
            background: hsla(0, 0%, 97%, .7);
            border: 1px solid #ddd;
            padding: 1em 1.5em;
            display: block;
            -webkit-overflow-scrolling: touch
        }

        hr {
            border: none;
            border-bottom: 1px solid #cfcfcf;
            margin-bottom: .8em;
            height: 10px
        }

        .typo-small,
        figcaption,
        small {
            font-size: .9em;
            color: #888
        }

        b,
        strong {
            font-weight: 700;
            color: #000
        }

        [draggable] {
            cursor: move
        }

        .clearfix:after,
        .clearfix:before {
            content: "";
            display: table
        }

        .clearfix:after {
            clear: both
        }

        .clearfix {
            zoom: 1
        }

        .textwrap,
        .textwrap td,
        .textwrap th {
            word-wrap: break-word;
            word-break: break-all
        }

        .textwrap-table {
            table-layout: fixed
        }

        .serif {
            font-family: Palatino, Optima, Georgia, serif
        }

        .typo-dl,
        .typo-form,
        .typo-hr,
        .typo-ol,
        .typo-p,
        .typo-pre,
        .typo-table,
        .typo-ul,
        .typo dl,
        .typo form,
        .typo hr,
        .typo ol,
        .typo p,
        .typo pre,
        .typo table,
        .typo ul,
        blockquote {
            margin-bottom: 1rem
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: PingFang SC, Helvetica Neue, Verdana, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif;
            color: #000;
            line-height: 1.35
        }

        .typo-h1,
        .typo-h2,
        .typo-h3,
        .typo-h4,
        .typo-h5,
        .typo-h6,
        .typo h1,
        .typo h2,
        .typo h3,
        .typo h4,
        .typo h5,
        .typo h6 {
            margin-top: 1.2em;
            margin-bottom: .6em;
            line-height: 1.35
        }

        .typo-h1,
        .typo h1 {
            font-size: 2em
        }

        .typo-h2,
        .typo h2 {
            font-size: 1.8em
        }

        .typo-h3,
        .typo h3 {
            font-size: 1.6em
        }

        .typo-h4,
        .typo h4 {
            font-size: 1.4em
        }

        .typo-h5,
        .typo-h6,
        .typo h5,
        .typo h6 {
            font-size: 1.2em
        }

        .typo-ul,
        .typo ul {
            margin-left: 1.3em;
            list-style: disc
        }

        .typo-ol,
        .typo ol {
            list-style: decimal;
            margin-left: 1.9em
        }

        .typo-ol ol,
        .typo-ol ul,
        .typo-ul ol,
        .typo-ul ul,
        .typo li ol,
        .typo li ul {
            margin-bottom: .8em;
            margin-left: 2em
        }

        .typo-ol ul,
        .typo-ul ul,
        .typo li ul {
            list-style: circle
        }

        .typo-table td,
        .typo-table th,
        .typo table caption,
        .typo table td,
        .typo table th {
            border: 1px solid #ddd;
            padding: .5em 1em;
            color: #666
        }

        .typo-table th,
        .typo table th {
            background: #fbfbfb
        }

        .typo-table thead th,
        .typo table thead th {
            background: hsla(0, 0%, 95%, .7)
        }

        .typo table caption {
            border-bottom: none
        }

        .typo-input,
        .typo-textarea {
            -webkit-appearance: none;
            border-radius: 0
        }

        .typo-em,
        .typo em,
        caption,
        legend {
            color: #000;
            font-weight: inherit
        }

        .typo-em {
            position: relative
        }

        .typo-em:after {
            position: absolute;
            top: .65em;
            left: 0;
            width: 100%;
            overflow: hidden;
            white-space: nowrap;
            content: "\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB"
        }

        .typo img {
            max-width: 100%
        }

        .common-content {
            font-weight: 400;
            color: #353535;
            line-height: 1.75rem;
            white-space: normal;
            word-break: normal;
            font-size: 1rem
        }

        .common-content img {
            display: block;
            max-width: 100%;
            background-color: #eee
        }

        .common-content audio,
        .common-content video {
            width: 100%;
            background-color: #eee
        }

        .common-content center,
        .common-content font {
            margin-top: 1rem;
            display: inline-block
        }

        .common-content center {
            width: 100%
        }

        .common-content pre {
            margin-top: 1rem;
            padding-left: 0;
            padding-right: 0;
            position: relative;
            overflow: hidden
        }

        .common-content pre code {
            font-size: .8rem;
            font-family: Consolas, Liberation Mono, Menlo, monospace, Courier;
            display: block;
            width: 100%;
            box-sizing: border-box;
            padding-left: 1rem;
            padding-right: 1rem;
            overflow-x: auto
        }

        .common-content hr {
            border: none;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            border-top: 1px solid #f5f5f5;
            height: 1px;
            background: none
        }

        .common-content b,
        .common-content h1,
        .common-content h2,
        .common-content h3,
        .common-content h4,
        .common-content h5,
        .common-content strong {
            font-weight: 700
        }

        .common-content h1,
        .common-content h2 {
            font-size: 1.125rem;
            margin-bottom: .45rem
        }

        .common-content h3,
        .common-content h4,
        .common-content h5 {
            font-size: 1rem;
            margin-bottom: .45rem
        }

        .common-content p {
            font-weight: 400;
            color: #353535;
            margin-top: .15rem
        }

        .common-content .orange {
            color: #ff5a05
        }

        .common-content .reference {
            font-size: 1rem;
            color: #888
        }

        .custom-rich-content h1 {
            margin-top: 0;
            font-weight: 400;
            font-size: 15.25px;
            border-bottom: 1px solid #eee;
            line-height: 2.8
        }

        .custom-rich-content li,
        .custom-rich-content p {
            font-size: 14px;
            color: #888;
            line-height: 1.6
        }

        table.hljs-ln {
            margin-bottom: 0;
            border-spacing: 0;
            border-collapse: collapse
        }

        table.hljs-ln,
        table.hljs-ln tbody,
        table.hljs-ln td,
        table.hljs-ln tr {
            box-sizing: border-box
        }

        table.hljs-ln td {
            padding: 0;
            border: 0
        }

        table.hljs-ln td.hljs-ln-numbers {
            min-width: 15px;
            color: rgba(27, 31, 35, .3);
            text-align: right;
            white-space: nowrap;
            cursor: pointer;
            user-select: none
        }

        table.hljs-ln td.hljs-ln-code,
        table.hljs-ln td.hljs-ln-numbers {
            font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
            font-size: 12px;
            line-height: 20px;
            vertical-align: top
        }

        table.hljs-ln td.hljs-ln-code {
            position: relative;
            padding-right: 10px;
            padding-left: 10px;
            overflow: visible;
            color: #24292e;
            word-wrap: normal;
            white-space: pre
        }

        video::-webkit-media-controls {
            overflow: hidden !important
        }

        video::-webkit-media-controls-enclosure {
            width: calc(100% + 32px);
            margin-left: auto
        }

        ._29HP61GA_0 {
            max-width:800px;
            margin:0 auto;
            margin-bottom: 20px;
            font-weight: 400;
            color: #353535;
            line-height: 1.76;
            white-space: normal;
            word-break: normal;
            font-size: 17px;
            -webkit-transition: background-color .3s ease;
            transition: background-color .3s ease
        }

        ._29HP61GA_0 .MathJax_Display {
            overflow: auto
        }

        ._29HP61GA_0 .poster {
            position: fixed;
            left: -10000px;
            top: -10000px;
            overflow: hidden;
            padding: 1rem;
            background: #ececec
        }

        ._29HP61GA_0 .richcontent-pre-copy {
            font-size: 13px;
            color: #888;
            position: absolute;
            right: 1em;
            top: .5em;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none
        }

        ._29HP61GA_0 .richcontent-pre-copy .iconfont {
            font-size: 12px;
            margin-right: .2em
        }

        ._29HP61GA_0 a {
            color: #fa8919;
            border-bottom: 1px solid #fa8919
        }

        ._29HP61GA_0 img {
            display: block;
            max-width: 100%;
            position: relative;
            left: 50%;
            -webkit-transform: translateX(-50%);
            transform: translateX(-50%);
            background-color: #eee;
            vertical-align: top;
            border-radius: 0
        }

        ._29HP61GA_0 audio,
        ._29HP61GA_0 video {
            width: 100%;
            background-color: #eee
        }

        ._29HP61GA_0 pre {
            margin-top: 16px;
            padding: 34px 0 0;
            margin-bottom: 30px;
            position: relative;
            border-radius: 6px;
            background: rgba(246, 247, 251, .749);
            border: 0
        }

        ._29HP61GA_0 pre code {
            font-size: 12px;
            font-family: Consolas, Liberation Mono, Menlo, monospace, Courier;
            display: block;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
            margin-left: 16px;
            margin-right: 16px;
            overflow-x: scroll
        }

        ._29HP61GA_0 pre code:after {
            content: "";
            height: 30px;
            width: 100%;
            display: block
        }

        ._29HP61GA_0 hr {
            border: none;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            border-top: 1px solid #f5f5f5;
            height: 1px;
            background: none
        }

        ._29HP61GA_0 h1,
        ._29HP61GA_0 h2,
        ._29HP61GA_0 h3,
        ._29HP61GA_0 h4,
        ._29HP61GA_0 h5 {
            margin-bottom: 20px;
            margin-top: 0;
            font-weight: 700
        }

        ._29HP61GA_0 b,
        ._29HP61GA_0 strong {
            font-weight: 700
        }

        ._29HP61GA_0 h1 {
            font-size: 21px
        }

        ._29HP61GA_0 h2 {
            font-size: 20px
        }

        ._29HP61GA_0 h3 {
            font-size: 19px
        }

        ._29HP61GA_0 h4 {
            font-size: 18px
        }

        ._29HP61GA_0 h5 {
            font-size: 17px
        }

        ._29HP61GA_0 center,
        ._29HP61GA_0 p {
            font-weight: 400;
            color: #353535;
            margin-top: 0;
            margin-bottom: 30px;
            word-break: break-word
        }

        ._29HP61GA_0 center {
            text-align: center
        }

        ._29HP61GA_0 blockquote {
            margin-top: 0;
            margin-bottom: 34px;
            border-left: 3px solid #e8e8e8;
            padding-left: 17px;
            color: #353535
        }

        ._29HP61GA_0 blockquote p {
            margin-top: 0;
            margin-bottom: 0
        }

        ._29HP61GA_0 ol,
        ._29HP61GA_0 ul {
            margin-bottom: 30px
        }

        ._29HP61GA_0 ol p,
        ._29HP61GA_0 ul p {
            margin-top: 0;
            margin-bottom: 0
        }

        ._29HP61GA_0 ol {
            list-style: decimal;
            margin-left: 20px
        }

        ._29HP61GA_0 ul li {
            padding-left: 17px;
            position: relative;
            margin-bottom: 10px
        }

        ._29HP61GA_0 ul li:after {
            content: "";
            height: 6px;
            width: 6px;
            border-radius: 50%;
            background: #353535;
            position: absolute;
            top: 10px;
            left: 0
        }

        ._29HP61GA_0 .orange {
            color: #fa8919
        }

        ._29HP61GA_0 .reference {
            color: #888
        }

        ._29HP61GA_0 .m-right {
            text-align: right
        }

        ._29HP61GA_0 .m-center {
            text-align: center;
            display: block
        }

        ._29HP61GA_0 .m-gray {
            color: #888
        }

        ._29HP61GA_0 .m-small {
            font-size: 15px
        }

        ._29HP61GA_0 table.hljs-ln {
            margin-bottom: 0;
            border-spacing: 0;
            border-collapse: collapse
        }

        ._29HP61GA_0 table.hljs-ln,
        ._29HP61GA_0 table.hljs-ln tbody,
        ._29HP61GA_0 table.hljs-ln td,
        ._29HP61GA_0 table.hljs-ln tr {
            -webkit-box-sizing: border-box;
            box-sizing: border-box
        }

        ._29HP61GA_0 table.hljs-ln td {
            padding: 0;
            border: 0
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers {
            min-width: 15px;
            font-size: 12px;
            color: rgba(27, 31, 35, .3);
            text-align: right;
            white-space: nowrap;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-code,
        ._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers {
            font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
            line-height: 20px;
            vertical-align: top
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-code {
            position: relative;
            padding-right: 10px;
            padding-left: 10px;
            overflow: visible;
            font-size: 13px;
            color: #666;
            word-wrap: normal;
            white-space: pre
        }

    </style>
</head>
<body>
<div class="_29HP61GA_0">
<h1>41-å•ä¾‹æ¨¡å¼ï¼ˆä¸Šï¼‰ï¼šä¸ºä»€ä¹ˆè¯´æ”¯æŒæ‡’åŠ è½½çš„åŒé‡æ£€æµ‹ä¸æ¯”é¥¿æ±‰å¼æ›´ä¼˜ï¼Ÿ</h1>
<p>ä»ä»Šå¤©å¼€å§‹ï¼Œæˆ‘ä»¬æ­£å¼è¿›å…¥åˆ°è®¾è®¡æ¨¡å¼çš„å­¦ä¹ ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œç»å…¸çš„è®¾è®¡æ¨¡å¼æœ‰23ç§ã€‚å…¶ä¸­ï¼Œå¸¸ç”¨çš„å¹¶ä¸æ˜¯å¾ˆå¤šã€‚æ®æˆ‘çš„å·¥ä½œç»éªŒæ¥çœ‹ï¼Œå¸¸ç”¨çš„å¯èƒ½éƒ½ä¸åˆ°ä¸€åŠã€‚å¦‚æœéšä¾¿æŠ“ä¸€ä¸ªç¨‹åºå‘˜ï¼Œè®©ä»–è¯´ä¸€è¯´æœ€ç†Ÿæ‚‰çš„3ç§è®¾è®¡æ¨¡å¼ï¼Œé‚£å…¶ä¸­è‚¯å®šä¼šåŒ…å«ä»Šå¤©è¦è®²çš„å•ä¾‹æ¨¡å¼ã€‚</p><p>ç½‘ä¸Šæœ‰å¾ˆå¤šè®²è§£å•ä¾‹æ¨¡å¼çš„æ–‡ç« ï¼Œä½†å¤§éƒ¨åˆ†éƒ½ä¾§é‡è®²è§£ï¼Œå¦‚ä½•æ¥å®ç°ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„å•ä¾‹ã€‚æˆ‘ä»Šå¤©ä¹Ÿä¼šè®²åˆ°å„ç§å•ä¾‹çš„å®ç°æ–¹æ³•ï¼Œä½†æ˜¯ï¼Œè¿™å¹¶ä¸æ˜¯æˆ‘ä»¬ä¸“æ å­¦ä¹ çš„é‡ç‚¹ï¼Œæˆ‘é‡ç‚¹è¿˜æ˜¯å¸Œæœ›å¸¦ä½ ææ¸…æ¥šä¸‹é¢è¿™æ ·å‡ ä¸ªé—®é¢˜ï¼ˆç¬¬ä¸€ä¸ªé—®é¢˜ä¼šåœ¨ä»Šå¤©è®²è§£ï¼Œåé¢ä¸‰ä¸ªé—®é¢˜æ”¾åˆ°ä¸‹ä¸€èŠ‚è¯¾ä¸­è®²è§£ï¼‰ã€‚</p><ul>
<li>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å•ä¾‹ï¼Ÿ</li>
<li>å•ä¾‹å­˜åœ¨å“ªäº›é—®é¢˜ï¼Ÿ</li>
<li>å•ä¾‹ä¸é™æ€ç±»çš„åŒºåˆ«ï¼Ÿ</li>
<li>æœ‰ä½•æ›¿ä»£çš„è§£å†³æ–¹æ¡ˆï¼Ÿ</li>
</ul><p>è¯ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬å¸¦ç€è¿™äº›é—®é¢˜ï¼Œæ­£å¼å¼€å§‹ä»Šå¤©çš„å­¦ä¹ å§ï¼</p><h2>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å•ä¾‹ï¼Ÿ</h2><p><strong>å•ä¾‹è®¾è®¡æ¨¡å¼</strong>ï¼ˆSingleton Design Patternï¼‰ç†è§£èµ·æ¥éå¸¸ç®€å•ã€‚ä¸€ä¸ªç±»åªå…è®¸åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼ˆæˆ–è€…å®ä¾‹ï¼‰ï¼Œé‚£è¿™ä¸ªç±»å°±æ˜¯ä¸€ä¸ªå•ä¾‹ç±»ï¼Œè¿™ç§è®¾è®¡æ¨¡å¼å°±å«ä½œå•ä¾‹è®¾è®¡æ¨¡å¼ï¼Œç®€ç§°å•ä¾‹æ¨¡å¼ã€‚</p><p>å¯¹äºå•ä¾‹çš„æ¦‚å¿µï¼Œæˆ‘è§‰å¾—æ²¡å¿…è¦è§£é‡Šå¤ªå¤šï¼Œä½ ä¸€çœ‹å°±èƒ½æ˜ç™½ã€‚æˆ‘ä»¬é‡ç‚¹çœ‹ä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦å•ä¾‹è¿™ç§è®¾è®¡æ¨¡å¼ï¼Ÿå®ƒèƒ½è§£å†³å“ªäº›é—®é¢˜ï¼Ÿæ¥ä¸‹æ¥æˆ‘é€šè¿‡ä¸¤ä¸ªå®æˆ˜æ¡ˆä¾‹æ¥è®²è§£ã€‚</p><h3>å®æˆ˜æ¡ˆä¾‹ä¸€ï¼šå¤„ç†èµ„æºè®¿é—®å†²çª</h3><p>æˆ‘ä»¬å…ˆæ¥çœ‹ç¬¬ä¸€ä¸ªä¾‹å­ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è‡ªå®šä¹‰å®ç°äº†ä¸€ä¸ªå¾€æ–‡ä»¶ä¸­æ‰“å°æ—¥å¿—çš„Loggerç±»ã€‚å…·ä½“çš„ä»£ç å®ç°å¦‚ä¸‹æ‰€ç¤ºï¼š</p><!-- [[[read_end]]] --><pre><code>public class Logger {
  private FileWriter writer;
  
  public Logger() {
    File file = new File(&quot;/Users/wangzheng/log.txt&quot;);
    writer = new FileWriter(file, true); //trueè¡¨ç¤ºè¿½åŠ å†™å…¥
  }
  
  public void log(String message) {
    writer.write(mesasge);
  }
}

// Loggerç±»çš„åº”ç”¨ç¤ºä¾‹ï¼š
public class UserController {
  private Logger logger = new Logger();
  
  public void login(String username, String password) {
    // ...çœç•¥ä¸šåŠ¡é€»è¾‘ä»£ç ...
    logger.log(username + &quot; logined!&quot;);
  }
}

public class OrderController {
  private Logger logger = new Logger();
  
  public void create(OrderVo order) {
    // ...çœç•¥ä¸šåŠ¡é€»è¾‘ä»£ç ...
    logger.log(&quot;Created an order: &quot; + order.toString());
  }
}
</code></pre><p>çœ‹å®Œä»£ç ä¹‹åï¼Œå…ˆåˆ«ç€æ€¥çœ‹æˆ‘ä¸‹é¢çš„è®²è§£ï¼Œä½ å¯ä»¥å…ˆæ€è€ƒä¸€ä¸‹ï¼Œè¿™æ®µä»£ç å­˜åœ¨ä»€ä¹ˆé—®é¢˜ã€‚</p><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬æ³¨æ„åˆ°ï¼Œæ‰€æœ‰çš„æ—¥å¿—éƒ½å†™å…¥åˆ°åŒä¸€ä¸ªæ–‡ä»¶/Users/wangzheng/log.txtä¸­ã€‚åœ¨UserControllerå’ŒOrderControllerä¸­ï¼Œæˆ‘ä»¬åˆ†åˆ«åˆ›å»ºä¸¤ä¸ªLoggerå¯¹è±¡ã€‚åœ¨Webå®¹å™¨çš„Servletå¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå¦‚æœä¸¤ä¸ªServletçº¿ç¨‹åŒæ—¶åˆ†åˆ«æ‰§è¡Œlogin()å’Œcreate()ä¸¤ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”åŒæ—¶å†™æ—¥å¿—åˆ°log.txtæ–‡ä»¶ä¸­ï¼Œé‚£å°±æœ‰å¯èƒ½å­˜åœ¨æ—¥å¿—ä¿¡æ¯äº’ç›¸è¦†ç›–çš„æƒ…å†µã€‚</p><p>ä¸ºä»€ä¹ˆä¼šå‡ºç°äº’ç›¸è¦†ç›–å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆç±»æ¯”ç€ç†è§£ã€‚åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå¦‚æœä¸¤ä¸ªçº¿ç¨‹åŒæ—¶ç»™åŒä¸€ä¸ªå…±äº«å˜é‡åŠ 1ï¼Œå› ä¸ºå…±äº«å˜é‡æ˜¯ç«äº‰èµ„æºï¼Œæ‰€ä»¥ï¼Œå…±äº«å˜é‡æœ€åçš„ç»“æœæœ‰å¯èƒ½å¹¶ä¸æ˜¯åŠ äº†2ï¼Œè€Œæ˜¯åªåŠ äº†1ã€‚åŒç†ï¼Œè¿™é‡Œçš„log.txtæ–‡ä»¶ä¹Ÿæ˜¯ç«äº‰èµ„æºï¼Œä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å¾€é‡Œé¢å†™æ•°æ®ï¼Œå°±æœ‰å¯èƒ½å­˜åœ¨äº’ç›¸è¦†ç›–çš„æƒ…å†µã€‚</p><p><img src="https://static001.geekbang.org/resource/image/2b/c2/2b0e6141d10399430c59169af4edc3c2.jpg" alt=""></p><p>é‚£å¦‚ä½•æ¥è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿæˆ‘ä»¬æœ€å…ˆæƒ³åˆ°çš„å°±æ˜¯é€šè¿‡åŠ é”çš„æ–¹å¼ï¼šç»™log()å‡½æ•°åŠ äº’æ–¥é”ï¼ˆJavaä¸­å¯ä»¥é€šè¿‡synchronizedçš„å…³é”®å­—ï¼‰ï¼ŒåŒä¸€æ—¶åˆ»åªå…è®¸ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨æ‰§è¡Œlog()å‡½æ•°ã€‚å…·ä½“çš„ä»£ç å®ç°å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>public class Logger {
  private FileWriter writer;

  public Logger() {
    File file = new File(&quot;/Users/wangzheng/log.txt&quot;);
    writer = new FileWriter(file, true); //trueè¡¨ç¤ºè¿½åŠ å†™å…¥
  }
  
  public void log(String message) {
    synchronized(this) {
      writer.write(mesasge);
    }
  }
}
</code></pre><p>ä¸è¿‡ï¼Œä½ ä»”ç»†æƒ³æƒ³ï¼Œè¿™çœŸçš„èƒ½è§£å†³å¤šçº¿ç¨‹å†™å…¥æ—¥å¿—æ—¶äº’ç›¸è¦†ç›–çš„é—®é¢˜å—ï¼Ÿç­”æ¡ˆæ˜¯å¦å®šçš„ã€‚è¿™æ˜¯å› ä¸ºï¼Œè¿™ç§é”æ˜¯ä¸€ä¸ªå¯¹è±¡çº§åˆ«çš„é”ï¼Œä¸€ä¸ªå¯¹è±¡åœ¨ä¸åŒçš„çº¿ç¨‹ä¸‹åŒæ—¶è°ƒç”¨log()å‡½æ•°ï¼Œä¼šè¢«å¼ºåˆ¶è¦æ±‚é¡ºåºæ‰§è¡Œã€‚ä½†æ˜¯ï¼Œä¸åŒçš„å¯¹è±¡ä¹‹é—´å¹¶ä¸å…±äº«åŒä¸€æŠŠé”ã€‚åœ¨ä¸åŒçš„çº¿ç¨‹ä¸‹ï¼Œé€šè¿‡ä¸åŒçš„å¯¹è±¡è°ƒç”¨æ‰§è¡Œlog()å‡½æ•°ï¼Œé”å¹¶ä¸ä¼šèµ·ä½œç”¨ï¼Œä»ç„¶æœ‰å¯èƒ½å­˜åœ¨å†™å…¥æ—¥å¿—äº’ç›¸è¦†ç›–çš„é—®é¢˜ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/20/29/203eb5070c3820b48500d4ab95732f29.jpg" alt=""></p><p>æˆ‘è¿™é‡Œç¨å¾®è¡¥å……ä¸€ä¸‹ï¼Œåœ¨åˆšåˆšçš„è®²è§£å’Œç»™å‡ºçš„ä»£ç ä¸­ï¼Œæˆ‘æ•…æ„â€œéšç’â€äº†ä¸€ä¸ªäº‹å®ï¼šæˆ‘ä»¬ç»™log()å‡½æ•°åŠ ä¸åŠ å¯¹è±¡çº§åˆ«çš„é”ï¼Œå…¶å®éƒ½æ²¡æœ‰å…³ç³»ã€‚å› ä¸ºFileWriteræœ¬èº«å°±æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå®ƒçš„å†…éƒ¨å®ç°ä¸­æœ¬èº«å°±åŠ äº†å¯¹è±¡çº§åˆ«çš„é”ï¼Œå› æ­¤ï¼Œåœ¨åœ¨å¤–å±‚è°ƒç”¨write()å‡½æ•°çš„æ—¶å€™ï¼Œå†åŠ å¯¹è±¡çº§åˆ«çš„é”å®é™…ä¸Šæ˜¯å¤šæ­¤ä¸€ä¸¾ã€‚å› ä¸ºä¸åŒçš„Loggerå¯¹è±¡ä¸å…±äº«FileWriterå¯¹è±¡ï¼Œæ‰€ä»¥ï¼ŒFileWriterå¯¹è±¡çº§åˆ«çš„é”ä¹Ÿè§£å†³ä¸äº†æ•°æ®å†™å…¥äº’ç›¸è¦†ç›–çš„é—®é¢˜ã€‚</p><p>é‚£æˆ‘ä»¬è¯¥æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿå®é™…ä¸Šï¼Œè¦æƒ³è§£å†³è¿™ä¸ªé—®é¢˜ä¹Ÿä¸éš¾ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠå¯¹è±¡çº§åˆ«çš„é”ï¼Œæ¢æˆç±»çº§åˆ«çš„é”å°±å¯ä»¥äº†ã€‚è®©æ‰€æœ‰çš„å¯¹è±¡éƒ½å…±äº«åŒä¸€æŠŠé”ã€‚è¿™æ ·å°±é¿å…äº†ä¸åŒå¯¹è±¡ä¹‹é—´åŒæ—¶è°ƒç”¨log()å‡½æ•°ï¼Œè€Œå¯¼è‡´çš„æ—¥å¿—è¦†ç›–é—®é¢˜ã€‚å…·ä½“çš„ä»£ç å®ç°å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>public class Logger {
  private FileWriter writer;

  public Logger() {
    File file = new File(&quot;/Users/wangzheng/log.txt&quot;);
    writer = new FileWriter(file, true); //trueè¡¨ç¤ºè¿½åŠ å†™å…¥
  }
  
  public void log(String message) {
    synchronized(Logger.class) { // ç±»çº§åˆ«çš„é”
      writer.write(mesasge);
    }
  }
}
</code></pre><p>é™¤äº†ä½¿ç”¨ç±»çº§åˆ«é”ä¹‹å¤–ï¼Œå®é™…ä¸Šï¼Œè§£å†³èµ„æºç«äº‰é—®é¢˜çš„åŠæ³•è¿˜æœ‰å¾ˆå¤šï¼Œåˆ†å¸ƒå¼é”æ˜¯æœ€å¸¸å¬åˆ°çš„ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚ä¸è¿‡ï¼Œå®ç°ä¸€ä¸ªå®‰å…¨å¯é ã€æ— bugã€é«˜æ€§èƒ½çš„åˆ†å¸ƒå¼é”ï¼Œå¹¶ä¸æ˜¯ä»¶å®¹æ˜“çš„äº‹æƒ…ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå¹¶å‘é˜Ÿåˆ—ï¼ˆæ¯”å¦‚Javaä¸­çš„BlockingQueueï¼‰ä¹Ÿå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼šå¤šä¸ªçº¿ç¨‹åŒæ—¶å¾€å¹¶å‘é˜Ÿåˆ—é‡Œå†™æ—¥å¿—ï¼Œä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹è´Ÿè´£å°†å¹¶å‘é˜Ÿåˆ—ä¸­çš„æ•°æ®ï¼Œå†™å…¥åˆ°æ—¥å¿—æ–‡ä»¶ã€‚è¿™ç§æ–¹å¼å®ç°èµ·æ¥ä¹Ÿç¨å¾®æœ‰ç‚¹å¤æ‚ã€‚</p><p>ç›¸å¯¹äºè¿™ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼Œå•ä¾‹æ¨¡å¼çš„è§£å†³æ€è·¯å°±ç®€å•ä¸€äº›äº†ã€‚å•ä¾‹æ¨¡å¼ç›¸å¯¹äºä¹‹å‰ç±»çº§åˆ«é”çš„å¥½å¤„æ˜¯ï¼Œä¸ç”¨åˆ›å»ºé‚£ä¹ˆå¤šLoggerå¯¹è±¡ï¼Œä¸€æ–¹é¢èŠ‚çœå†…å­˜ç©ºé—´ï¼Œå¦ä¸€æ–¹é¢èŠ‚çœç³»ç»Ÿæ–‡ä»¶å¥æŸ„ï¼ˆå¯¹äºæ“ä½œç³»ç»Ÿæ¥è¯´ï¼Œæ–‡ä»¶å¥æŸ„ä¹Ÿæ˜¯ä¸€ç§èµ„æºï¼Œä¸èƒ½éšä¾¿æµªè´¹ï¼‰ã€‚</p><p>æˆ‘ä»¬å°†Loggerè®¾è®¡æˆä¸€ä¸ªå•ä¾‹ç±»ï¼Œç¨‹åºä¸­åªå…è®¸åˆ›å»ºä¸€ä¸ªLoggerå¯¹è±¡ï¼Œæ‰€æœ‰çš„çº¿ç¨‹å…±äº«ä½¿ç”¨çš„è¿™ä¸€ä¸ªLoggerå¯¹è±¡ï¼Œå…±äº«ä¸€ä¸ªFileWriterå¯¹è±¡ï¼Œè€ŒFileWriteræœ¬èº«æ˜¯å¯¹è±¡çº§åˆ«çº¿ç¨‹å®‰å…¨çš„ï¼Œä¹Ÿå°±é¿å…äº†å¤šçº¿ç¨‹æƒ…å†µä¸‹å†™æ—¥å¿—ä¼šäº’ç›¸è¦†ç›–çš„é—®é¢˜ã€‚</p><p>æŒ‰ç…§è¿™ä¸ªè®¾è®¡æ€è·¯ï¼Œæˆ‘ä»¬å®ç°äº†Loggerå•ä¾‹ç±»ã€‚å…·ä½“ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>public class Logger {
  private FileWriter writer;
  private static final Logger instance = new Logger();

  private Logger() {
    File file = new File(&quot;/Users/wangzheng/log.txt&quot;);
    writer = new FileWriter(file, true); //trueè¡¨ç¤ºè¿½åŠ å†™å…¥
  }
  
  public static Logger getInstance() {
    return instance;
  }
  
  public void log(String message) {
    writer.write(mesasge);
  }
}

// Loggerç±»çš„åº”ç”¨ç¤ºä¾‹ï¼š
public class UserController {
  public void login(String username, String password) {
    // ...çœç•¥ä¸šåŠ¡é€»è¾‘ä»£ç ...
    Logger.getInstance().log(username + &quot; logined!&quot;);
  }
}

public class OrderController {
  private Logger logger = new Logger();
  
  public void create(OrderVo order) {
    // ...çœç•¥ä¸šåŠ¡é€»è¾‘ä»£ç ...
    Logger.getInstance().log(&quot;Created a order: &quot; + order.toString());
  }
}
</code></pre><h3>å®æˆ˜æ¡ˆä¾‹äºŒï¼šè¡¨ç¤ºå…¨å±€å”¯ä¸€ç±»</h3><p>ä»ä¸šåŠ¡æ¦‚å¿µä¸Šï¼Œå¦‚æœæœ‰äº›æ•°æ®åœ¨ç³»ç»Ÿä¸­åªåº”ä¿å­˜ä¸€ä»½ï¼Œé‚£å°±æ¯”è¾ƒé€‚åˆè®¾è®¡ä¸ºå•ä¾‹ç±»ã€‚</p><p>æ¯”å¦‚ï¼Œé…ç½®ä¿¡æ¯ç±»ã€‚åœ¨ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬åªæœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå½“é…ç½®æ–‡ä»¶è¢«åŠ è½½åˆ°å†…å­˜ä¹‹åï¼Œä»¥å¯¹è±¡çš„å½¢å¼å­˜åœ¨ï¼Œä¹Ÿç†æ‰€åº”å½“åªæœ‰ä¸€ä»½ã€‚</p><p>å†æ¯”å¦‚ï¼Œå”¯ä¸€é€’å¢IDå·ç ç”Ÿæˆå™¨ï¼ˆ<a href="https://time.geekbang.org/column/article/190979">ç¬¬34è®²</a>ä¸­æˆ‘ä»¬è®²çš„æ˜¯å”¯ä¸€IDç”Ÿæˆå™¨ï¼Œè¿™é‡Œè®²çš„æ˜¯å”¯ä¸€é€’å¢IDç”Ÿæˆå™¨ï¼‰ï¼Œå¦‚æœç¨‹åºä¸­æœ‰ä¸¤ä¸ªå¯¹è±¡ï¼Œé‚£å°±ä¼šå­˜åœ¨ç”Ÿæˆé‡å¤IDçš„æƒ…å†µï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬åº”è¯¥å°†IDç”Ÿæˆå™¨ç±»è®¾è®¡ä¸ºå•ä¾‹ã€‚</p><pre><code>import java.util.concurrent.atomic.AtomicLong;
public class IdGenerator {
  // AtomicLongæ˜¯ä¸€ä¸ªJavaå¹¶å‘åº“ä¸­æä¾›çš„ä¸€ä¸ªåŸå­å˜é‡ç±»å‹,
  // å®ƒå°†ä¸€äº›çº¿ç¨‹ä¸å®‰å…¨éœ€è¦åŠ é”çš„å¤åˆæ“ä½œå°è£…ä¸ºäº†çº¿ç¨‹å®‰å…¨çš„åŸå­æ“ä½œï¼Œ
  // æ¯”å¦‚ä¸‹é¢ä¼šç”¨åˆ°çš„incrementAndGet().
  private AtomicLong id = new AtomicLong(0);
  private static final IdGenerator instance = new IdGenerator();
  private IdGenerator() {}
  public static IdGenerator getInstance() {
    return instance;
  }
  public long getId() { 
    return id.incrementAndGet();
  }
}

// IdGeneratorä½¿ç”¨ä¸¾ä¾‹
long id = IdGenerator.getInstance().getId();
</code></pre><p>å®é™…ä¸Šï¼Œä»Šå¤©è®²åˆ°çš„ä¸¤ä¸ªä»£ç å®ä¾‹ï¼ˆLoggerã€IdGeneratorï¼‰ï¼Œè®¾è®¡çš„éƒ½å¹¶ä¸ä¼˜é›…ï¼Œè¿˜å­˜åœ¨ä¸€äº›é—®é¢˜ã€‚è‡³äºæœ‰ä»€ä¹ˆé—®é¢˜ä»¥åŠå¦‚ä½•æ”¹é€ ï¼Œä»Šå¤©æˆ‘æš‚æ—¶å–ä¸ªå…³å­ï¼Œä¸‹ä¸€èŠ‚è¯¾æˆ‘ä¼šè¯¦ç»†è®²è§£ã€‚</p><h2>å¦‚ä½•å®ç°ä¸€ä¸ªå•ä¾‹ï¼Ÿ</h2><p>å°½ç®¡ä»‹ç»å¦‚ä½•å®ç°ä¸€ä¸ªå•ä¾‹æ¨¡å¼çš„æ–‡ç« å·²ç»æœ‰å¾ˆå¤šäº†ï¼Œä½†ä¸ºäº†ä¿è¯å†…å®¹çš„å®Œæ•´æ€§ï¼Œæˆ‘è¿™é‡Œè¿˜æ˜¯ç®€å•ä»‹ç»ä¸€ä¸‹å‡ ç§ç»å…¸å®ç°æ–¹å¼ã€‚æ¦‚æ‹¬èµ·æ¥ï¼Œè¦å®ç°ä¸€ä¸ªå•ä¾‹ï¼Œæˆ‘ä»¬éœ€è¦å…³æ³¨çš„ç‚¹æ— å¤–ä¹ä¸‹é¢å‡ ä¸ªï¼š</p><ul>
<li>æ„é€ å‡½æ•°éœ€è¦æ˜¯privateè®¿é—®æƒé™çš„ï¼Œè¿™æ ·æ‰èƒ½é¿å…å¤–éƒ¨é€šè¿‡newåˆ›å»ºå®ä¾‹ï¼›</li>
<li>è€ƒè™‘å¯¹è±¡åˆ›å»ºæ—¶çš„çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼›</li>
<li>è€ƒè™‘æ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼›</li>
<li>è€ƒè™‘getInstance()æ€§èƒ½æ˜¯å¦é«˜ï¼ˆæ˜¯å¦åŠ é”ï¼‰ã€‚</li>
</ul><p>å¦‚æœä½ å¯¹è¿™å—å·²ç»å¾ˆç†Ÿæ‚‰äº†ï¼Œä½ å¯ä»¥å½“ä½œå¤ä¹ ã€‚æ³¨æ„ï¼Œä¸‹é¢çš„å‡ ç§å•ä¾‹å®ç°æ–¹å¼æ˜¯é’ˆå¯¹Javaè¯­è¨€è¯­æ³•çš„ï¼Œå¦‚æœä½ ç†Ÿæ‚‰çš„æ˜¯å…¶ä»–è¯­è¨€ï¼Œä¸å¦¨å¯¹æ¯”Javaçš„è¿™å‡ ç§å®ç°æ–¹å¼ï¼Œè‡ªå·±è¯•ç€æ€»ç»“ä¸€ä¸‹ï¼Œåˆ©ç”¨ä½ ç†Ÿæ‚‰çš„è¯­è¨€ï¼Œè¯¥å¦‚ä½•å®ç°ã€‚</p><h3>1.é¥¿æ±‰å¼</h3><p>é¥¿æ±‰å¼çš„å®ç°æ–¹å¼æ¯”è¾ƒç®€å•ã€‚åœ¨ç±»åŠ è½½çš„æ—¶å€™ï¼Œinstanceé™æ€å®ä¾‹å°±å·²ç»åˆ›å»ºå¹¶åˆå§‹åŒ–å¥½äº†ï¼Œæ‰€ä»¥ï¼Œinstanceå®ä¾‹çš„åˆ›å»ºè¿‡ç¨‹æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ä¸è¿‡ï¼Œè¿™æ ·çš„å®ç°æ–¹å¼ä¸æ”¯æŒå»¶è¿ŸåŠ è½½ï¼ˆåœ¨çœŸæ­£ç”¨åˆ°IdGeneratorçš„æ—¶å€™ï¼Œå†åˆ›å»ºå®ä¾‹ï¼‰ï¼Œä»åå­—ä¸­æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹å‡ºè¿™ä¸€ç‚¹ã€‚å…·ä½“çš„ä»£ç å®ç°å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>public class IdGenerator { 
  private AtomicLong id = new AtomicLong(0);
  private static final IdGenerator instance = new IdGenerator();
  private IdGenerator() {}
  public static IdGenerator getInstance() {
    return instance;
  }
  public long getId() { 
    return id.incrementAndGet();
  }
}
</code></pre><p>æœ‰äººè§‰å¾—è¿™ç§å®ç°æ–¹å¼ä¸å¥½ï¼Œå› ä¸ºä¸æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Œå¦‚æœå®ä¾‹å ç”¨èµ„æºå¤šï¼ˆæ¯”å¦‚å ç”¨å†…å­˜å¤šï¼‰æˆ–åˆå§‹åŒ–è€—æ—¶é•¿ï¼ˆæ¯”å¦‚éœ€è¦åŠ è½½å„ç§é…ç½®æ–‡ä»¶ï¼‰ï¼Œæå‰åˆå§‹åŒ–å®ä¾‹æ˜¯ä¸€ç§æµªè´¹èµ„æºçš„è¡Œä¸ºã€‚æœ€å¥½çš„æ–¹æ³•åº”è¯¥åœ¨ç”¨åˆ°çš„æ—¶å€™å†å»åˆå§‹åŒ–ã€‚ä¸è¿‡ï¼Œæˆ‘ä¸ªäººå¹¶ä¸è®¤åŒè¿™æ ·çš„è§‚ç‚¹ã€‚</p><p>å¦‚æœåˆå§‹åŒ–è€—æ—¶é•¿ï¼Œé‚£æˆ‘ä»¬æœ€å¥½ä¸è¦ç­‰åˆ°çœŸæ­£è¦ç”¨å®ƒçš„æ—¶å€™ï¼Œæ‰å»æ‰§è¡Œè¿™ä¸ªè€—æ—¶é•¿çš„åˆå§‹åŒ–è¿‡ç¨‹ï¼Œè¿™ä¼šå½±å“åˆ°ç³»ç»Ÿçš„æ€§èƒ½ï¼ˆæ¯”å¦‚ï¼Œåœ¨å“åº”å®¢æˆ·ç«¯æ¥å£è¯·æ±‚çš„æ—¶å€™ï¼Œåšè¿™ä¸ªåˆå§‹åŒ–æ“ä½œï¼Œä¼šå¯¼è‡´æ­¤è¯·æ±‚çš„å“åº”æ—¶é—´å˜é•¿ï¼Œç”šè‡³è¶…æ—¶ï¼‰ã€‚é‡‡ç”¨é¥¿æ±‰å¼å®ç°æ–¹å¼ï¼Œå°†è€—æ—¶çš„åˆå§‹åŒ–æ“ä½œï¼Œæå‰åˆ°ç¨‹åºå¯åŠ¨çš„æ—¶å€™å®Œæˆï¼Œè¿™æ ·å°±èƒ½é¿å…åœ¨ç¨‹åºè¿è¡Œçš„æ—¶å€™ï¼Œå†å»åˆå§‹åŒ–å¯¼è‡´çš„æ€§èƒ½é—®é¢˜ã€‚</p><p>å¦‚æœå®ä¾‹å ç”¨èµ„æºå¤šï¼ŒæŒ‰ç…§fail-fastçš„è®¾è®¡åŸåˆ™ï¼ˆæœ‰é—®é¢˜åŠæ—©æš´éœ²ï¼‰ï¼Œé‚£æˆ‘ä»¬ä¹Ÿå¸Œæœ›åœ¨ç¨‹åºå¯åŠ¨æ—¶å°±å°†è¿™ä¸ªå®ä¾‹åˆå§‹åŒ–å¥½ã€‚å¦‚æœèµ„æºä¸å¤Ÿï¼Œå°±ä¼šåœ¨ç¨‹åºå¯åŠ¨çš„æ—¶å€™è§¦å‘æŠ¥é”™ï¼ˆæ¯”å¦‚Javaä¸­çš„ PermGen Space OOMï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥ç«‹å³å»ä¿®å¤ã€‚è¿™æ ·ä¹Ÿèƒ½é¿å…åœ¨ç¨‹åºè¿è¡Œä¸€æ®µæ—¶é—´åï¼Œçªç„¶å› ä¸ºåˆå§‹åŒ–è¿™ä¸ªå®ä¾‹å ç”¨èµ„æºè¿‡å¤šï¼Œå¯¼è‡´ç³»ç»Ÿå´©æºƒï¼Œå½±å“ç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚</p><h3>2.æ‡’æ±‰å¼</h3><p>æœ‰é¥¿æ±‰å¼ï¼Œå¯¹åº”åœ°ï¼Œå°±æœ‰æ‡’æ±‰å¼ã€‚æ‡’æ±‰å¼ç›¸å¯¹äºé¥¿æ±‰å¼çš„ä¼˜åŠ¿æ˜¯æ”¯æŒå»¶è¿ŸåŠ è½½ã€‚å…·ä½“çš„ä»£ç å®ç°å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>public class IdGenerator { 
  private AtomicLong id = new AtomicLong(0);
  private static IdGenerator instance;
  private IdGenerator() {}
  public static synchronized IdGenerator getInstance() {
    if (instance == null) {
      instance = new IdGenerator();
    }
    return instance;
  }
  public long getId() { 
    return id.incrementAndGet();
  }
}
</code></pre><p>ä¸è¿‡æ‡’æ±‰å¼çš„ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œæˆ‘ä»¬ç»™getInstance()è¿™ä¸ªæ–¹æ³•åŠ äº†ä¸€æŠŠå¤§é”ï¼ˆsynchronzedï¼‰ï¼Œå¯¼è‡´è¿™ä¸ªå‡½æ•°çš„å¹¶å‘åº¦å¾ˆä½ã€‚é‡åŒ–ä¸€ä¸‹çš„è¯ï¼Œå¹¶å‘åº¦æ˜¯1ï¼Œä¹Ÿå°±ç›¸å½“äºä¸²è¡Œæ“ä½œäº†ã€‚è€Œè¿™ä¸ªå‡½æ•°æ˜¯åœ¨å•ä¾‹ä½¿ç”¨æœŸé—´ï¼Œä¸€ç›´ä¼šè¢«è°ƒç”¨ã€‚å¦‚æœè¿™ä¸ªå•ä¾‹ç±»å¶å°”ä¼šè¢«ç”¨åˆ°ï¼Œé‚£è¿™ç§å®ç°æ–¹å¼è¿˜å¯ä»¥æ¥å—ã€‚ä½†æ˜¯ï¼Œå¦‚æœé¢‘ç¹åœ°ç”¨åˆ°ï¼Œé‚£é¢‘ç¹åŠ é”ã€é‡Šæ”¾é”åŠå¹¶å‘åº¦ä½ç­‰é—®é¢˜ï¼Œä¼šå¯¼è‡´æ€§èƒ½ç“¶é¢ˆï¼Œè¿™ç§å®ç°æ–¹å¼å°±ä¸å¯å–äº†ã€‚</p><h3>3.åŒé‡æ£€æµ‹</h3><p>é¥¿æ±‰å¼ä¸æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Œæ‡’æ±‰å¼æœ‰æ€§èƒ½é—®é¢˜ï¼Œä¸æ”¯æŒé«˜å¹¶å‘ã€‚é‚£æˆ‘ä»¬å†æ¥çœ‹ä¸€ç§æ—¢æ”¯æŒå»¶è¿ŸåŠ è½½ã€åˆæ”¯æŒé«˜å¹¶å‘çš„å•ä¾‹å®ç°æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯åŒé‡æ£€æµ‹å®ç°æ–¹å¼ã€‚</p><p>åœ¨è¿™ç§å®ç°æ–¹å¼ä¸­ï¼Œåªè¦instanceè¢«åˆ›å»ºä¹‹åï¼Œå³ä¾¿å†è°ƒç”¨getInstance()å‡½æ•°ä¹Ÿä¸ä¼šå†è¿›å…¥åˆ°åŠ é”é€»è¾‘ä¸­äº†ã€‚æ‰€ä»¥ï¼Œè¿™ç§å®ç°æ–¹å¼è§£å†³äº†æ‡’æ±‰å¼å¹¶å‘åº¦ä½çš„é—®é¢˜ã€‚å…·ä½“çš„ä»£ç å®ç°å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>public class IdGenerator { 
  private AtomicLong id = new AtomicLong(0);
  private static IdGenerator instance;
  private IdGenerator() {}
  public static IdGenerator getInstance() {
    if (instance == null) {
      synchronized(IdGenerator.class) { // æ­¤å¤„ä¸ºç±»çº§åˆ«çš„é”
        if (instance == null) {
          instance = new IdGenerator();
        }
      }
    }
    return instance;
  }
  public long getId() { 
    return id.incrementAndGet();
  }
}
</code></pre><p>ç½‘ä¸Šæœ‰äººè¯´ï¼Œè¿™ç§å®ç°æ–¹å¼æœ‰äº›é—®é¢˜ã€‚å› ä¸ºæŒ‡ä»¤é‡æ’åºï¼Œå¯èƒ½ä¼šå¯¼è‡´IdGeneratorå¯¹è±¡è¢«newå‡ºæ¥ï¼Œå¹¶ä¸”èµ‹å€¼ç»™instanceä¹‹åï¼Œè¿˜æ²¡æ¥å¾—åŠåˆå§‹åŒ–ï¼ˆæ‰§è¡Œæ„é€ å‡½æ•°ä¸­çš„ä»£ç é€»è¾‘ï¼‰ï¼Œå°±è¢«å¦ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨äº†ã€‚</p><p>è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ç»™instanceæˆå‘˜å˜é‡åŠ ä¸Švolatileå…³é”®å­—ï¼Œç¦æ­¢æŒ‡ä»¤é‡æ’åºæ‰è¡Œã€‚å®é™…ä¸Šï¼Œåªæœ‰å¾ˆä½ç‰ˆæœ¬çš„Javaæ‰ä¼šæœ‰è¿™ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬ç°åœ¨ç”¨çš„é«˜ç‰ˆæœ¬çš„Javaå·²ç»åœ¨JDKå†…éƒ¨å®ç°ä¸­è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼ˆè§£å†³çš„æ–¹æ³•å¾ˆç®€å•ï¼Œåªè¦æŠŠå¯¹è±¡newæ“ä½œå’Œåˆå§‹åŒ–æ“ä½œè®¾è®¡ä¸ºåŸå­æ“ä½œï¼Œå°±è‡ªç„¶èƒ½ç¦æ­¢é‡æ’åºï¼‰ã€‚å…³äºè¿™ç‚¹çš„è¯¦ç»†è§£é‡Šï¼Œè·Ÿç‰¹å®šè¯­è¨€æœ‰å…³ï¼Œæˆ‘å°±ä¸å±•å¼€è®²äº†ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥è‡ªè¡Œç ”ç©¶ä¸€ä¸‹ã€‚</p><h3>4.é™æ€å†…éƒ¨ç±»</h3><p>æˆ‘ä»¬å†æ¥çœ‹ä¸€ç§æ¯”åŒé‡æ£€æµ‹æ›´åŠ ç®€å•çš„å®ç°æ–¹æ³•ï¼Œé‚£å°±æ˜¯åˆ©ç”¨Javaçš„é™æ€å†…éƒ¨ç±»ã€‚å®ƒæœ‰ç‚¹ç±»ä¼¼é¥¿æ±‰å¼ï¼Œä½†åˆèƒ½åšåˆ°äº†å»¶è¿ŸåŠ è½½ã€‚å…·ä½“æ˜¯æ€ä¹ˆåšåˆ°çš„å‘¢ï¼Ÿæˆ‘ä»¬å…ˆæ¥çœ‹å®ƒçš„ä»£ç å®ç°ã€‚</p><pre><code>public class IdGenerator { 
  private AtomicLong id = new AtomicLong(0);
  private IdGenerator() {}

  private static class SingletonHolder{
    private static final IdGenerator instance = new IdGenerator();
  }
  
  public static IdGenerator getInstance() {
    return SingletonHolder.instance;
  }
 
  public long getId() { 
    return id.incrementAndGet();
  }
}
</code></pre><p>SingletonHolder æ˜¯ä¸€ä¸ªé™æ€å†…éƒ¨ç±»ï¼Œå½“å¤–éƒ¨ç±»IdGeneratorè¢«åŠ è½½çš„æ—¶å€™ï¼Œå¹¶ä¸ä¼šåˆ›å»ºSingletonHolderå®ä¾‹å¯¹è±¡ã€‚åªæœ‰å½“è°ƒç”¨getInstance()æ–¹æ³•æ—¶ï¼ŒSingletonHolderæ‰ä¼šè¢«åŠ è½½ï¼Œè¿™ä¸ªæ—¶å€™æ‰ä¼šåˆ›å»ºinstanceã€‚insanceçš„å”¯ä¸€æ€§ã€åˆ›å»ºè¿‡ç¨‹çš„çº¿ç¨‹å®‰å…¨æ€§ï¼Œéƒ½ç”±JVMæ¥ä¿è¯ã€‚æ‰€ä»¥ï¼Œè¿™ç§å®ç°æ–¹æ³•æ—¢ä¿è¯äº†çº¿ç¨‹å®‰å…¨ï¼Œåˆèƒ½åšåˆ°å»¶è¿ŸåŠ è½½ã€‚</p><h3>5.æšä¸¾</h3><p>æœ€åï¼Œæˆ‘ä»¬ä»‹ç»ä¸€ç§æœ€ç®€å•çš„å®ç°æ–¹å¼ï¼ŒåŸºäºæšä¸¾ç±»å‹çš„å•ä¾‹å®ç°ã€‚è¿™ç§å®ç°æ–¹å¼é€šè¿‡Javaæšä¸¾ç±»å‹æœ¬èº«çš„ç‰¹æ€§ï¼Œä¿è¯äº†å®ä¾‹åˆ›å»ºçš„çº¿ç¨‹å®‰å…¨æ€§å’Œå®ä¾‹çš„å”¯ä¸€æ€§ã€‚å…·ä½“çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>public enum IdGenerator {
  INSTANCE;
  private AtomicLong id = new AtomicLong(0);
 
  public long getId() { 
    return id.incrementAndGet();
  }
}
</code></pre><h2>é‡ç‚¹å›é¡¾</h2><p>å¥½äº†ï¼Œä»Šå¤©çš„å†…å®¹åˆ°æ­¤å°±è®²å®Œäº†ã€‚æˆ‘ä»¬æ¥æ€»ç»“å›é¡¾ä¸€ä¸‹ï¼Œä½ éœ€è¦æŒæ¡çš„é‡ç‚¹å†…å®¹ã€‚</p><p><strong>1.å•ä¾‹çš„å®šä¹‰</strong></p><p>å•ä¾‹è®¾è®¡æ¨¡å¼ï¼ˆSingleton Design Patternï¼‰ç†è§£èµ·æ¥éå¸¸ç®€å•ã€‚ä¸€ä¸ªç±»åªå…è®¸åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼ˆæˆ–è€…å«å®ä¾‹ï¼‰ï¼Œé‚£è¿™ä¸ªç±»å°±æ˜¯ä¸€ä¸ªå•ä¾‹ç±»ï¼Œè¿™ç§è®¾è®¡æ¨¡å¼å°±å«ä½œå•ä¾‹è®¾è®¡æ¨¡å¼ï¼Œç®€ç§°å•ä¾‹æ¨¡å¼ã€‚</p><p><strong>2.å•ä¾‹çš„ç”¨å¤„</strong></p><p>ä»ä¸šåŠ¡æ¦‚å¿µä¸Šï¼Œæœ‰äº›æ•°æ®åœ¨ç³»ç»Ÿä¸­åªåº”è¯¥ä¿å­˜ä¸€ä»½ï¼Œå°±æ¯”è¾ƒé€‚åˆè®¾è®¡ä¸ºå•ä¾‹ç±»ã€‚æ¯”å¦‚ï¼Œç³»ç»Ÿçš„é…ç½®ä¿¡æ¯ç±»ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨å•ä¾‹è§£å†³èµ„æºè®¿é—®å†²çªçš„é—®é¢˜ã€‚</p><p><strong>3.å•ä¾‹çš„å®ç°</strong></p><p>å•ä¾‹æœ‰ä¸‹é¢å‡ ç§ç»å…¸çš„å®ç°æ–¹å¼ã€‚</p><ul>
<li>é¥¿æ±‰å¼</li>
</ul><p>é¥¿æ±‰å¼çš„å®ç°æ–¹å¼ï¼Œåœ¨ç±»åŠ è½½çš„æœŸé—´ï¼Œå°±å·²ç»å°†instanceé™æ€å®ä¾‹åˆå§‹åŒ–å¥½äº†ï¼Œæ‰€ä»¥ï¼Œinstanceå®ä¾‹çš„åˆ›å»ºæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ä¸è¿‡ï¼Œè¿™æ ·çš„å®ç°æ–¹å¼ä¸æ”¯æŒå»¶è¿ŸåŠ è½½å®ä¾‹ã€‚</p><ul>
<li>æ‡’æ±‰å¼</li>
</ul><p>æ‡’æ±‰å¼ç›¸å¯¹äºé¥¿æ±‰å¼çš„ä¼˜åŠ¿æ˜¯æ”¯æŒå»¶è¿ŸåŠ è½½ã€‚è¿™ç§å®ç°æ–¹å¼ä¼šå¯¼è‡´é¢‘ç¹åŠ é”ã€é‡Šæ”¾é”ï¼Œä»¥åŠå¹¶å‘åº¦ä½ç­‰é—®é¢˜ï¼Œé¢‘ç¹çš„è°ƒç”¨ä¼šäº§ç”Ÿæ€§èƒ½ç“¶é¢ˆã€‚</p><ul>
<li>åŒé‡æ£€æµ‹</li>
</ul><p>åŒé‡æ£€æµ‹å®ç°æ–¹å¼æ—¢æ”¯æŒå»¶è¿ŸåŠ è½½ã€åˆæ”¯æŒé«˜å¹¶å‘çš„å•ä¾‹å®ç°æ–¹å¼ã€‚åªè¦instanceè¢«åˆ›å»ºä¹‹åï¼Œå†è°ƒç”¨getInstance()å‡½æ•°éƒ½ä¸ä¼šè¿›å…¥åˆ°åŠ é”é€»è¾‘ä¸­ã€‚æ‰€ä»¥ï¼Œè¿™ç§å®ç°æ–¹å¼è§£å†³äº†æ‡’æ±‰å¼å¹¶å‘åº¦ä½çš„é—®é¢˜ã€‚</p><ul>
<li>é™æ€å†…éƒ¨ç±»</li>
</ul><p>åˆ©ç”¨Javaçš„é™æ€å†…éƒ¨ç±»æ¥å®ç°å•ä¾‹ã€‚è¿™ç§å®ç°æ–¹å¼ï¼Œæ—¢æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Œä¹Ÿæ”¯æŒé«˜å¹¶å‘ï¼Œå®ç°èµ·æ¥ä¹Ÿæ¯”åŒé‡æ£€æµ‹ç®€å•ã€‚</p><ul>
<li>æšä¸¾</li>
</ul><p>æœ€ç®€å•çš„å®ç°æ–¹å¼ï¼ŒåŸºäºæšä¸¾ç±»å‹çš„å•ä¾‹å®ç°ã€‚è¿™ç§å®ç°æ–¹å¼é€šè¿‡Javaæšä¸¾ç±»å‹æœ¬èº«çš„ç‰¹æ€§ï¼Œä¿è¯äº†å®ä¾‹åˆ›å»ºçš„çº¿ç¨‹å®‰å…¨æ€§å’Œå®ä¾‹çš„å”¯ä¸€æ€§ã€‚</p><h2>è¯¾å ‚è®¨è®º</h2><ol>
<li>åœ¨ä½ æ‰€ç†Ÿæ‚‰çš„ç¼–ç¨‹è¯­è¨€çš„ç±»åº“ä¸­ï¼Œæœ‰å“ªäº›ç±»æ˜¯å•ä¾‹ç±»ï¼Ÿåˆä¸ºä»€ä¹ˆè¦è®¾è®¡æˆå•ä¾‹ç±»å‘¢ï¼Ÿ</li>
<li>åœ¨ç¬¬ä¸€ä¸ªå®æˆ˜æ¡ˆä¾‹ä¸­ï¼Œé™¤äº†æˆ‘ä»¬è®²åˆ°çš„ç±»çº§åˆ«é”ã€åˆ†å¸ƒå¼é”ã€å¹¶å‘é˜Ÿåˆ—ã€å•ä¾‹æ¨¡å¼ç­‰è§£å†³æ–¹æ¡ˆä¹‹å¤–ï¼Œå®é™…ä¸Šè¿˜æœ‰ä¸€ç§éå¸¸ç®€å•çš„è§£å†³æ—¥å¿—äº’ç›¸è¦†ç›–é—®é¢˜çš„æ–¹æ³•ï¼Œä½ æƒ³åˆ°äº†å—ï¼Ÿ</li>
</ol><p>å¯ä»¥åœ¨ç•™è¨€åŒºè¯´ä¸€è¯´ï¼Œå’ŒåŒå­¦ä¸€èµ·äº¤æµå’Œåˆ†äº«ã€‚å¦‚æœæœ‰æ”¶è·ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚</p><h2>ç²¾é€‰ç•™è¨€ï¼š</h2>
        <ul>
        
<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            aof  2020-02-05 12:10:05
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            è¿™çœŸçš„æ˜¯çœ‹è¿‡çš„å…³äºè®²å•ä¾‹çš„æœ€å¥½çš„æ–‡ç«  [9èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            Douglas  2020-02-05 14:13:39
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            äº‰å“¥æ–°å¹´å¥½ï¼Œ æœ‰ä¸ªé—®é¢˜æƒ³è¯·æ•™ä¸€ä¸‹ï¼Œå•ä¾‹çš„å®ç°ä¸­çœ‹åˆ°è¿‡ä¸€ç§å®ç°æ–¹å¼ï¼ŒåŒ…æ‹¬åœ¨springæºç ä¸­æœ‰ç±»ä¼¼çš„å®ç° ï¼Œä»£ç å¦‚ä¸‹ <br> 1. public  class Singleton {<br>    private static volatile Singleton instance=null; <br>    private Singleton() {<br>    } <br><br>    public static Singleton getInstance() {&#47;&#47;  <br>        Singleton temp=instance;  &#47;&#47;  ä¸ºä»€ä¹ˆè¦ç”¨å±€éƒ¨å˜é‡æ¥æ¥æ”¶<br>        if (null == temp) { <br>            synchronized (Singleton.class) { <br>                temp=instance;<br>                if (null == temp) { <br>                    temp=new Singleton(); <br>                    instance=temp;<br>                }<br>            }<br>        }<br>        return instance; <br>    }<br>}<br><br>springæºç   å¦‚   ReactiveAdapterRegistryã€‚ <br>JDK æºç  å¦‚ AbstractQueuedSynchronizerã€‚<br>å¾ˆå¤šåœ°æ–¹ éƒ½æœ‰ç”¨ å±€éƒ¨å˜é‡ æ¥æ¥æ”¶ é™æ€çš„æˆå‘˜å˜é‡ï¼Œ è¯·é—®ä¸‹ è¿™ä¹ˆå†™æœ‰ä»€ä¹ˆæ€§èƒ½ä¸Šçš„ä¼˜åŒ–ç‚¹å—ï¼Ÿ<br>jcu åŒ…ä¸‹é¢ç±»ä¼¼çš„ç”¨æ³•å¤ªå¤šã€‚æƒ³å¼„æ˜ç™½ä¸ºä»€ä¹ˆè¦è¿™æ ·å†™<br>2. çœ‹jdk å®˜æ–¹çš„æ–‡æ¡£ï¼ˆJMMï¼‰æœ‰è¯´æ˜ æŒ‡ä»¤é‡æ’å‘ç”Ÿçš„åœ°æ–¹æœ‰å¾ˆå¤š ï¼Œç¼–è¯‘å™¨ï¼ŒåŠæ—¶ç¼–è¯‘ï¼ŒCPUåœ¨ç¡¬ä»¶å±‚é¢çš„ä¼˜åŒ–ï¼Œçœ‹spring æ¯”è¾ƒæ–°çš„ä»£ç ä¹Ÿä½¿ç”¨volatileæ¥ä¿®é¥°ï¼Œä½ è¯´çš„new å…³é”®å­—å’Œåˆå§‹åŒ– ä½œä¸ºåŸå­æ“ä½œ å¯ä»¥è¯´ä¸€ä¸‹ å¤§æ¦‚çš„jdkç‰ˆæœ¬å— [4èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            è¾£ä¹ˆå¤§  2020-02-05 15:22:56
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            ç®€å•çš„æ–¹æ³•ï¼šåˆ›å»ºä¸€ä¸ªé™æ€ç§æœ‰çš„filewritterï¼Œå¤šçº¿ç¨‹æˆ–è€…å¤šä¸ªLoggerå¯¹è±¡å…±äº«ä¸€ä¸ªfilewritterã€‚ [3èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            é»„æ—æ™´  2020-02-05 11:07:32
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            æ‰“å¡<br><br>çœ‹è¿‡Eventbus çš„æºç ï¼Œå†™æ³•æ˜¯å…¸å‹çš„åŒé‡é”æ£€éªŒæ–¹å¼ï¼Œä½†æ˜¯æ„é€ æ–¹æ³•æ˜¯public çš„<br><br>çœ‹æºç è§£é‡Šï¼Œè¿™æ˜¯å› ä¸ºEventBuså¯èƒ½æœ‰å¤šæ¡æ€»çº¿ï¼Œè®¢é˜…è€…æ³¨å†Œåˆ°ä¸åŒçº¿ä¸Šçš„ EventBusï¼Œé€šè¿‡ä¸åŒçš„å®ä¾‹æ¥å‘é€æ•°æ®ï¼Œä¸åŒçš„ EventBus æ˜¯ç›¸äº’éš”ç¦»å¼€çš„ï¼Œè®¢é˜…è€…éƒ½åªä¼šæ”¶åˆ°æ³¨å†Œåˆ°è¯¥çº¿ä¸Šäº‹ä»¶ã€‚<br><br>ä½†æ˜¯æŒ‰ç…§å•ä¾‹å®šä¹‰ä»–åˆä¸å±äºå•ä¾‹ï¼Œæ„Ÿè§‰å¾ˆæœ‰ç–‘é—® [2èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            ğŸ¤¤ğŸ¤¤  2020-02-05 10:23:17
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            è¿™ç¯‡éå¸¸æ£’ï¼ŒğŸ”¨ [2èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            zsé˜¿å¸…  2020-02-06 19:06:13
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            äº‰å“¥ï¼Œå¦‚æœæœåŠ¡æ˜¯å¤šä¸ªå®ä¾‹è·‘ï¼Œæ—¥å¿—é‚£ä¸ªå•ä¾‹æ¨¡å¼ä¼šå¯¼è‡´è¦†ç›–å—ï¼Ÿ [1èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            å¿†æ°´å¯’  2020-02-05 11:17:36
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨æˆ‘çš„é¡¹ç›®ä¸­ç¼“å­˜ç±»çš„èŠ‚ç‚¹è®¾ç½®ä¸ºå•ä¾‹æ¨¡å¼ï¼Œè¿˜æœ‰åŠ è½½å…¨å±€é…ç½®æ–‡ä»¶çš„ç±»ï¼Œä¹Ÿè®¾ç½®ä¸ºäº†å•ä¾‹æ¨¡å¼ã€‚<br>ç¬¬äºŒä¸ªé—®é¢˜ï¼Œæˆ‘æ˜¯ç”¨æ¶ˆæ¯é˜Ÿåˆ—å®ç°çš„æ—¥å¿—æ”¶é›†ã€‚ [1èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            å°æ™å­  2020-02-05 10:05:05
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            1.JDKä¸­ java.lang.Runtimeæ˜¯å•ä¾‹å®ç°çš„ï¼Œè¯¥ç±»ç”¨äºç®¡ç†åº”ç”¨ç¨‹åºè¿è¡ŒæœŸé—´çš„å„ç§ä¿¡æ¯ï¼Œæ¯”å¦‚memoryå’Œprocessorä¿¡æ¯ï¼Œæ‰€ä»¥ä»è¯¥ç±»çš„ç”¨é€”å¯ä»¥çŸ¥é“è¯¥ç±»å¿…é¡»æ˜¯å•ä¾‹çš„ã€‚<br>2. ä½¿ç”¨å¤šä¸ªæ–‡ä»¶ï¼Œæ¯newä¸€ä¸ªå®ä¾‹å°±ä½¿ç”¨ä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œè¿™æ ·å°±æ²¡æœ‰æ–‡ä»¶è¦†ç›–é—®é¢˜äº†ã€‚ [1èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            Summer  ç©ºåŸ  2020-02-05 09:14:01
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            ç‹è€å¸ˆè¿™ç¯‡è®²è§£çš„éå¸¸æ£’ï¼Œèµï¼ [1èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            å¤©å¤©å‘ä¸Šå¡ç´¢  2020-02-07 09:58:59
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            ä¹‹å‰åšWPå¼€å‘çš„æ—¶å€™ç”¨åˆ°çš„ç¡¬ä»¶å¦‚Cameraå¤§å¤šæ˜¯å•ä¾‹ï¼Œä¹‹å‰çœ‹å¾®è½¯çš„æºç æœ‰çš„å•ä¾‹ä½¿ç”¨å¹¶å‘å­—å…¸æ¥å®ç°çš„ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            ä¸œæµ  2020-02-06 16:50:11
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            1.åœ¨ä½ æ‰€ç†Ÿæ‚‰çš„ç¼–ç¨‹è¯­è¨€çš„ç±»åº“ä¸­ï¼Œæœ‰å“ªäº›ç±»æ˜¯å•ä¾‹ç±»ï¼Ÿåˆä¸ºä»€ä¹ˆè¦è®¾è®¡æˆå•ä¾‹ç±»å‘¢ï¼Ÿ<br>java ä¸­çš„æ‰“å°ç±»ï¼ŒSystem.out,ï¼ˆæˆ‘çŒœçš„ï¼‰ï¼›åŸå› åˆ™æ˜¯ç”¨èµ·æ¥æ–¹ä¾¿<br><br>åœ¨ç¬¬ä¸€ä¸ªå®æˆ˜æ¡ˆä¾‹ä¸­ï¼Œé™¤äº†æˆ‘ä»¬è®²åˆ°çš„ç±»çº§åˆ«é”ã€åˆ†å¸ƒå¼é”ã€å¹¶å‘é˜Ÿåˆ—ã€å•ä¾‹æ¨¡å¼ç­‰è§£å†³æ–¹æ¡ˆä¹‹å¤–ï¼Œå®é™…ä¸Šè¿˜æœ‰ä¸€ç§éå¸¸ç®€å•çš„è§£å†³æ—¥å¿—äº’ç›¸è¦†ç›–é—®é¢˜çš„æ–¹æ³•ï¼Œä½ æƒ³åˆ°äº†å—ï¼Ÿ<br>æ²¡ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            æ²ˆåº·  2020-02-06 16:24:08
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            1ã€java beanå¤§éƒ¨åˆ†éƒ½æ˜¯å•ä¾‹å§ï¼Œä¾‹å¦‚æˆ‘ä»¬çš„service beanï¼Œå•ä¾‹ä¹Ÿæ˜¯ä¸ºäº†å¤ç”¨ç±»å’Œèµ„æºå…±äº«å§ï¼Œä½†æ˜¯è¦æ³¨æ„å•ä¾‹éœ€è¦æ— çŠ¶æ€ï¼Œæœ‰çŠ¶æ€çš„åˆ™è¦è€ƒè™‘çº¿ç¨‹å®‰å…¨é—®é¢˜<br>2ã€å¦‚æœçº¿ç¨‹å®‰å…¨çš„è¯ï¼Œå…±äº«ä¸€ä¸ªç±»å°±å¯ä»¥äº†ï¼Œä¾èµ–æ³¨å…¥ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            å°çŒ´å­å¹æ³¡æ³¡  2020-02-05 23:27:07
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            å¦‚æœè¦å®ç°åºåˆ—åŒ–ååºåˆ—åŒ–çš„å•ä¾‹æ¨¡å¼ï¼Œè¦å¢åŠ ä¸€ä¸ªreadResolve()æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š<br>protected Object readResolve() throws ObjectStreamException {<br>    return instance;<br>} 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            javaadu  2020-02-05 22:51:01
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šSpringæ¡†æ¶ä¸­ï¼Œå¤§éƒ¨åˆ†çš„ç»„ä»¶éƒ½æ˜¯å•ä¾‹çš„ï¼›<br>ç¬¬äºŒä¸ªé—®é¢˜ï¼šå°†ä¸åŒä¸šåŠ¡çš„æ—¥å¿—æ‹†å¼€ï¼Œå¹¶å°†Loggerå¯¹è±¡ç”¨staticå…³é”®è¯ä¿®é¥° 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            Frank  2020-02-05 22:50:07
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            1. ç›®å‰èƒ½æƒ³åˆ°çš„ç±»åº“ä¸­ä½¿ç”¨äº†å•ä¾‹æ¨¡å¼çš„æœ‰è¿æ¥æ± ã€java.lang.Runtime#getRuntimeï¼ŒHibernateçš„SessionFactoryã€Configurationï¼Œè¿™ä¹ˆè®¾è®¡çš„çš„åŸå› æ˜¯ç»´æŒå…¨å±€å”¯ä¸€ï¼Œè¿˜å­˜åœ¨è¿™äº›ç±»çš„å®ä¾‹å¯èƒ½ä¼šå ç”¨å¾ˆå¤šå†…å­˜ï¼Œæˆ–è€…å®ä¾‹çš„åˆå§‹åŒ–è¿‡ç¨‹æ¯”è¾ƒå†—é•¿ã€‚<br>2. å†™æ—¥å¿—çš„ä¾‹å­ä¸­è¿˜å¯ä½¿ç”¨JDK1.4 æä¾›çš„FileLockæ¥è§£å†³èµ„æºç«äº‰é—®é¢˜ï¼Œå…¶ä»–æ›´ç®€å•çš„æ–¹å¼æƒ³ä¸åˆ°ã€‚ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            è¾£ä¹ˆå¤§  2020-02-05 21:19:34
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            å†™äº†ç¯‡æ€»ç»“ï¼Œè¿˜è®¨è®ºäº†å•ä¾‹æ¨¡å¼ä¸­åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„é—®é¢˜ã€‚https:&#47;&#47;github.com&#47;gdhucoder&#47;DesignPattern&#47;blob&#47;master&#47;021_SingletonPattern.md 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            æ¾èŠ±çš®è›‹me  2020-02-05 18:24:55
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            MDCï¼Œåœ¨æ—¥è®°ä¸Šä¸‹æ–‡ä¸­è®°å½•çº¿ç¨‹ä¿¡æ¯ä»¥åŒºåˆ†æ—¥è®° 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            å®ˆæ‹™  2020-02-05 14:13:55
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            SingletonæŒ‡ä»…ä»…è¢«å®ä¾‹åŒ–ä¸€æ¬¡çš„ç±». Singletoné€šå¸¸è¢«ç”¨æ¥ä»£è¡¨æœ¬è´¨ä¸Šå”¯ä¸€çš„ç³»ç»Ÿç»„ä»¶, å¦‚çª—å£ç®¡ç†å™¨æˆ–æ–‡ä»¶ç³»ç»Ÿ.<br><br>-- &lt;Effective Java&gt;  p14<br><br>è¯¾å ‚è®¨è®º:<br><br>1. åœ¨ä½ æ‰€ç†Ÿæ‚‰çš„ç¼–ç¨‹è¯­è¨€çš„ç±»åº“ä¸­ï¼Œæœ‰å“ªäº›ç±»æ˜¯å•ä¾‹ç±»ï¼Ÿåˆä¸ºä»€ä¹ˆè¦è®¾è®¡æˆå•ä¾‹ç±»å‘¢ï¼Ÿ<br><br>   Android SDKä¸­çš„AccessibilityManageråº”ç”¨äº†æ‡’æ±‰å¼å•ä¾‹æ¨¡å¼.<br><br>   <br><br>2. åœ¨ç¬¬ä¸€ä¸ªå®æˆ˜æ¡ˆä¾‹ä¸­ï¼Œé™¤äº†æˆ‘ä»¬è®²åˆ°çš„ç±»çº§åˆ«é”ã€åˆ†å¸ƒå¼é”ã€å¹¶å‘é˜Ÿåˆ—ã€å•ä¾‹æ¨¡å¼ç­‰è§£å†³æ–¹æ¡ˆä¹‹å¤–ï¼Œå®é™…ä¸Šè¿˜æœ‰ä¸€ç§éå¸¸ç®€å•çš„è§£å†³æ—¥å¿—äº’ç›¸è¦†ç›–é—®é¢˜çš„æ–¹æ³•ï¼Œä½ æƒ³åˆ°äº†å—ï¼Ÿ<br><br>â€‹    å°†FileWriterçš„å£°æ˜ç”¨staticä¿®é¥°, å³å¯è§£å†³æ—¥å¿—ç›¸äº’è¦†ç›–çš„é—®é¢˜. åŸç†: è¢«å£°æ˜ä¸ºstaticçš„æˆå‘˜å˜é‡ç”±ç±»çš„æ‰€æœ‰å®ä¾‹æ‰€å…±äº«, æ‰€ä»¥Loggerç±»çš„æ‰€æœ‰å®ä¾‹éƒ½æ˜¯é€šè¿‡åŒä¸€FileWriterå†™å…¥æ—¥å¿—åˆ°æ–‡ä»¶.  
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            Eden Ma  2020-02-05 13:50:44
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            iOSä¸­UIApplicationç±»æ˜¯å•ä¾‹,å› ä¸ºå®ƒæ‰§è¡Œçš„éƒ½æ˜¯åº”ç”¨çº§åˆ«çš„æ“ä½œ,è®¾è®¡æˆå•ä¾‹æ›´å®‰å…¨. 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            ä¸¿æ·¡å¿˜  2020-02-05 13:23:14
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            ç›´æ¥å°†æ—¥å¿—å†™å…¥åˆ°æ•°æ®åº“ï¼Ÿï¼Ÿï¼Ÿ 
        </div>
        
    </div>
</li>
            </ul>
</div>
</body>
</html>